<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="appTitle">Performance Drafting Assistant</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Arabic font (Noto Sans Arabic) for better display -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom Colors inspired by LinkedIn's aesthetic */
        :root {
            --linkedin-blue-primary: #0a66c2; /* LinkedIn's main blue for accents, active states */
            --linkedin-blue-dark: #004182;    /* Darker blue for headers */
            --linkedin-blue-light: #e6f2ff;   /* Very light blue for subtle backgrounds */
            --linkedin-gray-50: #f3f2ef;      /* Main background color */
            --linkedin-gray-100: #e0e0e0;     /* Border colors, light elements */
            --linkedin-gray-200: #c4c4c4;     /* Slightly darker gray for some elements */
            --linkedin-text-dark: #1f1f1f;     /* Dark text */
            --linkedin-text-medium: #6b6b6b;  /* Medium gray text */
            --linkedin-text-light: #999999;   /* Lighter gray for placeholders, hints */
            --linkedin-red: #dc3545;          /* Error/alert red */
            --linkedin-green: #28a745;        /* Success green */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--linkedin-gray-50);
            color: var(--linkedin-text-dark);
            line-height: 1.5; /* Improved readability */
        }
        html[dir="rtl"] body {
            font-family: 'Noto Sans Arabic', sans-serif;
        }

        /* General Container & Module Styling */
        .app-main-container {
            width: 100%; /* Make it fluid */
            max-width: 1000px; /* Max width for larger screens */
            margin: 0 auto; /* Center the container */
            padding: 1.5rem; /* Consistent padding */
            box-sizing: border-box; /* Include padding in width */
        }

        .module-section {
            background-color: #ffffff;
            border-radius: 0.75rem; /* Rounded corners */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06); /* Subtle shadow */
            padding: 2rem; /* Generous padding */
            margin-bottom: 2rem; /* Space between modules */
            border: 1px solid var(--linkedin-gray-100); /* Light border */
        }

        /* Header Styling */
        .app-header {
            background-color: var(--linkedin-blue-dark); /* Darker blue header */
            color: white;
            padding: 1rem 1.5rem; /* Adjusted padding */
            border-radius: 0.75rem; /* Rounded corners for header */
            margin-bottom: 1.5rem;
            display: flex;
            flex-direction: row; /* Changed to row for logo on left */
            align-items: center;
            justify-content: flex-start; /* Align items to the start */
            gap: 1rem; /* Space between logo and text */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15); /* Slightly stronger shadow for header */
            text-align: left; /* Align text to left */
            opacity: 0; /* Start invisible for animation */
            animation: fadeIn 1s ease-out forwards; /* Apply fade-in animation */
        }

        /* Keyframes for fade-in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .app-header h1 { /* This is "Employee Performance Drafting Tool" */
            font-size: 2.25rem; /* Adjusted font size for single title */
            font-weight: 700;
            margin: 0; /* Explicitly set margin to 0 */
            flex-grow: 1; /* Allow h1 to take available space */
            text-align: center; /* Center the title */
        }
        /* Removed h2 specific styles as it's no longer used */

        /* Removed #sudani-logo specific styles as it's no longer used */
        html[dir="rtl"] .app-header {
            flex-direction: row-reverse; /* Reverse order for RTL to keep logo on left */
            justify-content: flex-end; /* Align items to the end for RTL */
        }
        html[dir="rtl"] .app-header h1 {
            text-align: center; /* Center text on mobile */
        }


        /* Navigation Bar Styling */
        .nav-bar {
            background-color: #ffffff;
            padding: 0.75rem 1rem; /* Adjusted padding */
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between; /* Space out nav items and language buttons */
            align-items: center;
            flex-wrap: wrap; /* Allow wrapping on small screens */
            gap: 0.5rem; /* Space between nav items/language buttons */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
        }
        .nav-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* Center nav buttons */
            gap: 0.75rem; /* Space between buttons */
            flex-grow: 1; /* Allow list to take available space */
            list-style: none; /* Remove bullet points */
            padding: 0; /* Remove default padding */
            margin: 0; /* Remove default margin */
        }
        .nav-button {
            padding: 0.6rem 1.2rem; /* Comfortable button padding */
            border-radius: 9999px; /* Pill shape */
            background-color: transparent; /* Default transparent */
            color: var(--linkedin-text-medium); /* Lighter text for inactive */
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: 1px solid var(--linkedin-gray-100); /* Subtle border */
            white-space: nowrap; /* Prevent wrapping nav text */
        }
        .nav-button:hover {
            background-color: var(--linkedin-blue-light); /* Light blue hover */
            color: var(--linkedin-blue-primary); /* Primary blue text on hover */
            border-color: var(--linkedin-blue-primary);
        }
        .nav-button.active {
            background-color: var(--linkedin-blue-primary); /* LinkedIn blue for active */
            color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Slight shadow for active */
            border-color: var(--linkedin-blue-primary);
        }

        /* Language Switcher */
        .language-switcher {
            display: flex;
            gap: 0.5rem;
        }
        .lang-button {
            padding: 0.4rem 0.8rem;
            border-radius: 0.375rem; /* Slightly rounded */
            background-color: var(--linkedin-gray-50);
            color: var(--linkedin-text-medium);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 1px solid var(--linkedin-gray-100);
        }
        .lang-button:hover {
            background-color: var(--linkedin-gray-100);
            color: var(--linkedin-text-dark);
        }
        .lang-button.active {
            background-color: var(--linkedin-blue-primary);
            color: white;
            border-color: var(--linkedin-blue-primary);
        }

        /* Input Group & Fields */
        .input-group {
            margin-bottom: 1.25rem; /* Consistent spacing */
        }
        .input-group label {
            display: block;
            margin-bottom: 0.4rem; /* Closer to input */
            font-weight: 600;
            color: var(--linkedin-text-dark);
            font-size: 0.95rem; /* Slightly larger labels */
        }
        .input-group input[type="text"],
        .input-group input[type="date"],
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 0.75rem 1rem; /* Generous padding */
            border: 1px solid var(--linkedin-gray-100);
            border-radius: 0.375rem; /* Consistent roundedness */
            background-color: #ffffff;
            color: var(--linkedin-text-dark);
            transition: all 0.2s ease-in-out;
        }
        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--linkedin-blue-primary);
            box-shadow: 0 0 0 2px rgba(10, 102, 194, 0.2); /* LinkedIn-style focus ring */
        }

        /* Checkbox Group */
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 0.95rem;
            color: var(--linkedin-text-dark);
        }
        .checkbox-group input[type="checkbox"] {
            margin-right: 0.6rem;
            height: 1.15rem; /* Slightly larger checkbox */
            width: 1.15rem;
            border-color: var(--linkedin-gray-200);
            border-radius: 0.25rem;
            accent-color: var(--linkedin-blue-primary); /* Use accent-color for checkbox fill */
        }

        /* Primary Action Button (Generate) */
        .button-generate {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 0.85rem 1.5rem; /* Larger button */
            background-color: var(--linkedin-blue-primary);
            color: white;
            font-weight: 600;
            border-radius: 0.375rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
        }
        .button-generate:hover {
            background-color: var(--linkedin-blue-dark); /* Darker blue on hover */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }
        .button-generate:disabled {
            background-color: var(--linkedin-gray-200); /* Gray for disabled */
            color: var(--linkedin-text-medium);
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Output Area */
        .output-area {
            margin-top: 2rem;
            padding: 2rem;
            background-color: var(--linkedin-blue-light); /* Light blue background for output */
            border-radius: 0.75rem;
            border: 1px solid var(--linkedin-blue-primary); /* Blue border */
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05); /* Inner shadow */
        }
        .output-area h3 {
            color: var(--linkedin-blue-dark); /* Dark blue heading */
            font-size: 1.25rem; /* Larger heading */
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .output-item {
            background-color: #ffffff;
            padding: 1.25rem; /* More padding */
            border-radius: 0.5rem;
            margin-bottom: 1.25rem; /* Space between output items */
            border: 1px solid var(--linkedin-gray-100);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        .output-item:last-child {
            margin-bottom: 0;
        }
        .output-item h4 {
            font-weight: 600;
            color: var(--linkedin-text-dark);
            margin-bottom: 0.75rem;
        }
        .output-item p {
            color: var(--linkedin-text-dark);
            font-size: 0.95rem;
        }

        /* Copy Button */
        .copy-button {
            background-color: var(--linkedin-blue-primary); /* Consistent blue */
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            margin-top: 1rem;
            display: inline-flex; /* Use inline-flex for proper alignment */
            align-items: center;
            gap: 0.5rem;
            border: none;
            float: right; /* Keep it right aligned */
        }
        .copy-button:hover {
            background-color: var(--linkedin-blue-dark);
        }
        .copy-button:disabled {
            background-color: var(--linkedin-gray-200);
            color: var(--linkedin-text-medium);
            cursor: not-allowed;
        }
        html[dir="rtl"] .copy-button {
            float: left; /* Align left for RTL */
        }

        /* Error Message */
        .error-message {
            background-color: var(--linkedin-red);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
            font-weight: 500;
            text-align: center;
        }

        /* Spinner Icon */
        .spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Icons within buttons */
        .button-generate .icon, .copy-button .icon {
            width: 1.1em; /* Adjust icon size relative to font */
            height: 1.1em;
            margin-right: 0.5em; /* Space between icon and text */
        }
        html[dir="rtl"] .button-generate .icon, html[dir="rtl"] .copy-button .icon {
            margin-right: 0;
            margin-left: 0.5em;
        }

        /* Learn & Grow specific styles (LinkedIn-inspired) */
        .article-card {
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
            padding: 1.25rem;
            border: 1px solid var(--linkedin-gray-100);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .article-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .article-title {
            font-size: 1.15rem;
            font-weight: 600;
            color: var(--linkedin-blue-dark);
            margin-bottom: 0.5rem;
        }

        .article-description {
            font-size: 0.9rem;
            color: var(--linkedin-text-medium);
            line-height: 1.4;
            flex-grow: 1; /* Allows description to take available space */
            margin-bottom: 1rem;
        }

        .article-link {
            display: inline-block;
            color: var(--linkedin-blue-primary);
            font-weight: 600;
            font-size: 0.9rem;
            text-decoration: none;
            transition: color 0.2s ease-in-out;
            align-self: flex-start; /* Align link to the start */
        }

        .article-link:hover {
            color: var(--linkedin-blue-dark);
            text-decoration: underline;
        }

        .articles-grid {
            /* Tailwind grid classes already provide responsive behavior */
            gap: 1rem; /* Space between cards */
        }

        /* IDP specific styles */
        .development-target-block {
            border: 1px solid var(--linkedin-gray-100);
            background-color: var(--linkedin-gray-50);
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            position: relative;
        }
        .development-target-block .remove-block-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: none;
            border: none;
            color: var(--linkedin-red);
            cursor: pointer;
            font-size: 1.5rem;
            line-height: 1;
            padding: 0;
        }
        .development-target-block .remove-block-btn:hover {
            color: var(--linkedin-blue-dark);
        }
        .development-target-block h4 {
            margin-bottom: 1rem;
            color: var(--linkedin-blue-dark);
        }
        .development-target-block .input-group {
            margin-bottom: 1rem; /* Slightly tighter spacing within a block */
        }
        .development-target-block .add-button {
            background-color: var(--linkedin-blue-primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .development-target-block .add-button:hover {
            background-color: var(--linkedin-blue-dark);
        }
        .development-target-block .activity-group,
        .development-target-block .support-group {
            border: 1px solid var(--linkedin-gray-200);
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 0.375rem;
            margin-top: 1rem;
            position: relative;
        }
        .development-target-block .activity-group .remove-activity-btn,
        .development-target-block .support-group .remove-support-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            color: var(--linkedin-red);
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
            padding: 0;
        }
        .development-target-block .activity-group .remove-activity-btn:hover,
        .development-target-block .support-group .remove-support-btn:hover {
            color: var(--linkedin-blue-dark);
        }


        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .app-main-container {
                padding: 1rem;
            }
            .app-header {
                flex-direction: column; /* Stack elements vertically on small screens */
                align-items: center;
                text-align: center;
                gap: 0.5rem; /* Smaller gap for mobile */
            }
            html[dir="rtl"] .app-header {
                flex-direction: column; /* Keep column direction for RTL on mobile */
                align-items: center;
            }
            .app-header h1 {
                text-align: center; /* Center text on mobile */
                font-size: 1.8rem; /* Adjust font size for mobile */
            }
            /* Removed #sudani-logo specific styles for mobile as it's no longer used */
            .nav-bar {
                flex-direction: column;
                align-items: stretch; /* Stretch to fill width */
            }
            .nav-list {
                flex-direction: column;
                align-items: stretch;
            }
            .nav-list li {
                width: 100%; /* Full width for stacked nav buttons */
            }
            .nav-button {
                width: 100%; /* Ensure full width */
                text-align: center;
                padding: 0.75rem 1rem;
            }
            .language-switcher {
                margin-top: 1rem;
                justify-content: center; /* Center language buttons */
                width: 100%;
            }
            .module-section {
                padding: 1.5rem;
            }
            .input-group label {
                font-size: 0.9rem;
            }
            .input-group input, .input-group textarea, .input-group select {
                font-size: 0.95rem;
            }
            .button-generate {
                font-size: 0.95rem;
            }
            .output-area {
                padding: 1.5rem;
            }
            .output-area h3 {
                font-size: 1.1rem;
            }
            .output-item {
                padding: 1rem;
            }
        }
    </style>
</head>
<body class="p-4">
    <div class="app-main-container">
        <header class="app-header">
            <!-- Removed the logo image -->
            <h1 data-i18n="appSubTitle">Employee Performance Drafting Tool</h1>
        </header>

        <nav class="nav-bar">
            <ul class="nav-list">
                <li><button id="nav-smartGoal" class="nav-button" data-i18n="smartGoalsBtn">SMART Goals</button></li>
                <li><button id="nav-performanceAppraisal" class="nav-button" data-i18n="appraisalFeedbackBtn">Appraisal Feedback</button></li>
                <li><button id="nav-performanceNote" class="nav-button" data-i18n="performanceNotesBtn">Performance Notes</button></li>
                <li><button id="nav-idp" class="nav-button" data-i18n="idpBtn">Individual Development Plan</button></li>
                <li><button id="nav-regularCheckIn" class="nav-button" data-i18n="regularCheckInBtn">Periodic Feedback (Regular Check-in)</button></li>
                <li><button id="nav-references" class="nav-button" data-i18n="learnGrowBtn">Learn & Grow</button></li>
            </ul>
            <div class="language-switcher">
                <button id="lang-en" class="lang-button active">EN</button>
                <button id="lang-ar" class="lang-button">AR</button>
            </div>
        </nav>

        <main id="app-content">
            <!-- Content for each module will be loaded here dynamically -->
        </main>
    </div>

    <script>
        // Icon SVGs (cleaned up and aligned with LinkedIn's style - simple line icons)
        const copyIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
        const checkIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M20 6 9 17l-5-5"></path></svg>`;
        const loaderIcon = `<svg class="animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>`;
        const addIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>`;
        const removeIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>`;


        // Translation Dictionary
        const translations = {
            en: {
                employeePerformanceHub: 'Employee Performance Hub',
                appTitle: 'Performance Drafting Assistant',
                appSubTitle: 'Employee Performance Drafting Tool',
                smartGoalsBtn: 'SMART Goals',
                appraisalFeedbackBtn: 'Appraisal Feedback',
                performanceNotesBtn: 'Performance Notes',
                idpBtn: 'Individual Development Plan',
                regularCheckInBtn: 'Periodic Feedback (Regular Check-in)',
                learnGrowBtn: 'Learn & Grow',
                smartGoalDrafting: 'SMART Goal Drafting',
                goalName: 'Goal Name',
                targetKpi: 'Target/KPI',
                deadline: 'Deadline',
                successCriteriaInputLabel: 'Your Success Criteria (Optional)',
                generateSubtasks: 'Generate actionable subtasks',
                generateSmartGoal: 'Generate SMART Goal',
                generatedDrafts: 'Generated Drafts:',
                smartGoalDraft: 'Smart Goal Draft',
                goalLabel: 'Goal:',
                targetKpiLabel: 'Target/KPI:',
                suggestedSubtasks: 'Suggested Subtasks:',
                copyToClipboard: 'Copy to Clipboard',
                copied: 'Copied!',
                failedToCopy: 'Failed to copy text. Please copy manually.',
                fillAllMandatoryFields: 'Please fill in all mandatory fields: Goal Name, Target/KPI, and Deadline.',
                failedToGenerate: 'Failed to generate:',
                failedToGenerateGoals: 'Failed to generate SMART goals or received an empty response. Please try adjusting your inputs.',
                targetKpiNotAvailable: 'N/A',
                suggestSuccessCriteria: 'Suggest success criteria',
                suggestedSuccessCriteria: 'Suggested Success Criteria:',

                appraisalFeedback: 'Performance Appraisal Feedback',
                selectPerformanceTier: 'Select Performance Tier',
                poorPerformance: 'Poor Performance',
                belowExpectations: 'Below Expectations',
                meetExpectations: 'Meet Expectations',
                exceedExpectations: 'Exceed Expectations',
                outstanding: 'Outstanding',
                inputsFor: 'Inputs for',
                employeeDidntAchieveGoals: 'Confirmation that the employee didn’t achieve all goals',
                documentedExamples: 'Documented examples of behaviors or outcomes that led to this evaluation',
                managerSupportExamples: 'Examples of support provided by the manager to enhance performance',
                strengthsWeaknessesAnalysis: 'Strengths and weaknesses analysis',
                projectsGoalsUnmet: 'Projects/goals/initiatives where expectations were not met',
                documentedBehaviorResults: 'Documented behavior/result examples that didn’t meet expectations',
                managerSupportToImprove: 'Manager support examples to improve behavior',
                proposedTrainingPlan: 'Proposed individual training plan',
                skillsForFutureAdvancement: 'Skills and experiences required for future advancement',
                plannedResponsibilities: 'Planned Responsibilities',
                accomplishedResponsibilities: 'Accomplished Responsibilities',
                coreResponsibilities: 'Core Responsibilities',
                additionalAchievements: 'Additional achievements',
                justificationAdditional: 'Justification for “additional” classification',
                achievementsImpact: 'Impact of these achievements',
                outstandingSubOption: 'Outstanding Sub-option',
                selectAnOption: 'Select an option',
                workedInRiskAreas: 'Worked in risk area',
                createdInnovation: 'Created innovation',
                exceededTarget: 'Exceeded target',
                missionDetails: 'Mission Details (location, time, risk context)',
                solutionDescription: 'Solution description',
                businessImpactMetrics: 'Business impact metrics',
                targetSurpassMetrics: 'Target surpass metrics (quantitative)',
                impactExceededTarget: 'Impact',
                generateFeedback: 'Generate Feedback',
                generatedFeedback: 'Generated Feedback:',
                fillAppraisalMandatoryFields: 'Please select a performance tier and fill in all mandatory fields for the selected tier.',
                exceededTheTarget: 'Exceeded the target',
                additionalResponsibilities: 'Additional Responsibilities',
                justificationAdditionalResponsibilities: 'Justification for “additional” Responsibilities',
                impactResponsibilitiesAchievements: 'Impact of these Responsibilities / achievements',


                performanceNotes: 'Performance Notes',
                dateOfObservation: 'Date of Observation',
                feedbackType: 'Feedback Type',
                recognition: 'Recognition',
                development: 'Development',
                general: 'General',
                observedBehaviorAction: 'Observed Behavior/Action',
                contextSituation: 'Context/Situation',
                impactOutcome: 'Impact/Outcome',
                sentimentIndicator: 'Sentiment Indicator',
                positive: 'Positive',
                negative: 'Negative',
                neutral: 'Neutral',
                alignmentGoalsValues: 'Alignment with Goals/Values',
                nextSteps: 'Next Steps',
                generatePerformanceNote: 'Generate Performance Note',
                generatedNote: 'Generated Note:',
                fillNoteMandatoryFields: 'Please fill in all mandatory fields: Date of Observation, Feedback Type, Observed Behavior/Action, Context/Situation, Impact/Outcome, and Sentiment Indicator.',

                idp: 'Individual Development Plan',
                employeeCurrentRole: 'Employee\'s Current Role',
                currentSkillsStrengths: 'Current Skills and Strengths',
                desiredSkillsDevelopment: 'Desired Skills/Areas for Development',
                careerAspirations: 'Career Aspirations',

                developmentTarget: 'Development Target Skill/Competency/Goal',
                developmentActivities: 'Development Activities',
                addActivity: 'Add Activity',
                trainingCourses: 'Training/Courses',
                workshopsCertifications: 'Workshops/Certifications',
                jobShadowingMentoring: 'Job Shadowing/Mentoring',
                stretchAssignments: 'Stretch Assignments',
                researchTopics: 'Research Topics',
                networking: 'Networking',
                supportResources: 'Support & Resources',
                managerOrgSupport: 'Manager/Org Support Required',
                budgetTimeEstimates: 'Budget/Time Estimates',
                toolsSystemsNeeded: 'Tools/Systems Needed',
                activityTypeLabel: 'Activity Type',
                detailedDescription: 'Detailed Description',
                addDevelopmentTarget: 'Add Development Target',
                removeTarget: 'Remove Target',

                regularCheckInFeedback: 'Periodic Feedback',
                dateOfCheckIn: 'Date of Check-in',
                progressOnGoals: 'Progress on Goals/Projects',
                challenges: 'Challenges/Roadblocks (Optional)',
                accomplishments: 'Accomplishments/Highlights (Optional)',
                managerObservations: 'Manager Observations/Feedback (Optional)',
                nextStepsCheckIn: 'Next Steps/Action Items (Optional)',
                generateCheckInFeedback: 'Generate Periodic Feedback',
                generatedCheckInFeedback: 'Generated Periodic Feedback:',
                fillCheckInMandatoryFields: 'Please fill in all mandatory fields for Periodic Feedback: Date and Progress on Goals.',


                generateIdp: 'Generate IDP',
                generatedIdpDraft: 'Generated IDP Draft:',
                fillIdpMandatoryFields: 'Please fill in all mandatory fields for the Individual Development Plan.',

                placeholderGoalName: 'e.g., Increase customer satisfaction',
                placeholderTargetKpi: 'e.g., NPS score by 10 points',
                placeholderDeadline: 'Select a date',
                placeholderSuccessCriteriaInput: 'e.g., Achieve 90% customer satisfaction score',
                placeholderEmployeeDidntAchieveGoals: 'Confirm whether the employee achieved all goals (Yes/No)',
                placeholderDocumentedExamples: 'Provide specific examples of behaviors or outcomes.',
                placeholderManagerSupportExamples: 'Describe support provided (e.g., coaching, training).',
                placeholderStrengthsWeaknessesAnalysis: 'Analyze key strengths and areas for development.',
                placeholderProjectsGoalsUnmet: 'List projects or goals where expectations were not met.',
                placeholderDocumentedBehaviorResults: 'Provide examples of behaviors or results that fell short.',
                placeholderManagerSupportToImprove: 'Examples of managerial support to improve performance.',
                placeholderProposedTrainingPlan: 'Outline a proposed individual training plan.',
                placeholderSkillsForFutureAdvancement: 'Identify skills, knowledge, and experiences needed for career growth.',
                placeholderPlannedResponsibilities: 'e.g., Responsible for Q1 sales report, managed customer database.',
                placeholderAccomplishedResponsibilities: 'e.g., Delivered Q1 sales report on time, successfully updated 95% of customer records.',
                placeholderCoreResponsibilities: 'Describe how core responsibilities were performed.',
                placeholderAdditionalAchievements: 'Detail achievements beyond core responsibilities.',
                placeholderJustificationAdditional: 'Explain why these additional achievements are significant.',
                placeholderAchievementsImpact: 'Describe the impact of these achievements.',
                placeholderMissionDetails: 'Provide details about the mission, location, time, and risk context.',
                placeholderSolutionDescription: 'Describe the innovative solution created.',
                placeholderBusinessImpactMetrics: 'Quantify the business impact of the innovation (e.g., cost savings, revenue increase).',
                placeholderTargetSurpassMetrics: 'Provide quantitative details on how targets were surpassed.',
                placeholderImpactExceededTarget: 'Describe the impact of exceeding the target.',
                placeholderObservedBehaviorAction: 'Describe the specific behavior or action observed.',
                placeholderContextSituation: 'Describe the situation or context in which the behavior/action occurred.',
                placeholderImpactOutcome: 'Describe the impact or outcome of the observed behavior/action.',
                placeholderSentimentIndicator: 'Select sentiment',
                placeholderAlignmentGoalsValues: 'Explain how the behavior aligns (or not) with company goals or values.',
                placeholderNextSteps: 'Outline any follow-up actions, discussions, or plans.',
                placeholderDevelopmentTarget: 'e.g., Project Management, Leadership Skills',
                placeholderActivityDescription: 'e.g., Complete "Project Management Professional" certification course',
                placeholderManagerOrgSupport: 'e.g., Manager to provide mentorship, Budget for external training',
                placeholderBudgetTimeEstimates: 'e.g., $1500, 40 hours over 3 months',
                placeholderToolsSystemsNeeded: 'e.g., Access to Jira, Salesforce',
                placeholderProgressOnGoals: 'e.g., Completed Phase 1 of Project X, met all deadlines.',
                placeholderChallenges: 'e.g., Faced technical issues with software Y, resolved by collaborating with Z team.',
                placeholderAccomplishments: 'e.g., Successfully launched feature A, received positive feedback from users.',
                placeholderManagerObservations: "e.g., Noted employee's proactive approach to problem-solving.",
                placeholderNextStepsCheckIn: 'e.g., Follow up on software Y updates, research new training opportunities.',
                learnGrowIntroContent: 'This section provides resources and references for effective performance management practices, helping you and your team to learn and grow:',
                smartGoalsCategory: 'Unlocking Achievement: The Power of SMART Goals', // Changed from performancePlanningSubcategory
                smartGoalsCategoryContentIntro: 'Setting goals is fundamental to progress, whether in our personal lives, careers, or organizations. Yet, vague aspirations like "get in shape," "do better at work," or "increase sales" often fade into the background, leaving us feeling stagnant. This is where the SMART goal framework emerges as a powerful, practical tool for transforming nebulous desires into actionable, achievable plans. By applying the SMART criteria, individuals and teams significantly increase their chances of success.',
                whatAreSmartGoals: 'What are SMART Goals?',
                smartSpecific: 'S - Specific:',
                smartSpecificContent: 'Goals must be clear, unambiguous, and well-defined. They answer the questions: What exactly needs to be accomplished? Why is it important? Who is involved? Where will it happen? Which resources or constraints are relevant?',
                smartSpecificNotExample: 'Not SMART: "Improve customer service."',
                smartSpecificExample: 'SMART: "Reduce average customer call wait time by 15% within the Support Department by Q4 through hiring two additional agents and implementing a new call-routing software."',
                smartMeasurable: 'M - Measurable:',
                smartMeasurableContent: 'Goals must include concrete criteria for tracking progress and determining when the goal has been achieved. How much? How many? How will you know you\'ve succeeded?',
                smartMeasurableNotExample: 'Not SMART: "Write more reports."',
                smartMeasurableExample: 'SMART: "Complete and submit the monthly financial analysis report by the 5th business day of each month for the next six months."',
                smartAchievable: 'A - Achievable (or Attainable):',
                smartAchievableContent: 'Goals should be realistic and attainable, given available resources, skills, and time. While they should stretch capabilities, they shouldn\'t be impossible. Is the goal feasible?',
                smartAchievableNotExample: 'Not SMART: "Double the company\'s market share in one month."',
                smartAchievableExample: 'SMART: "Increase market share by 5% in the Northeast region by the end of the fiscal year through a targeted digital marketing campaign and partnership with two regional distributors."',
                smartRelevant: 'R - Relevant (or Realistic):',
                smartRelevantContent: 'Goals must matter and align with broader objectives. Does this goal contribute to the larger mission or strategic plan? Is it the right time? Does it fit within the current context?',
                smartRelevantNotExample: 'Not SMART (for an entry-level engineer): "Become CEO next year."',
                smartRelevantExample: 'SMART: "Complete the advanced project management certification within the next 12 months to qualify for a Senior Engineer role, aligning with the department\'s goal of enhancing technical leadership."',
                smartTimeBound: 'T - Time-bound:',
                smartTimeBoundContent: 'Goals need a clearly defined deadline or timeframe. This creates urgency, prevents procrastination, and provides a target to work towards. When will this be achieved? What can be done today? In six weeks?',
                smartTimeBoundNotExample: 'Not SMART: "Learn Spanish."',
                smartTimeBoundExample: 'SMART: "Achieve conversational fluency in Spanish (able to hold a 30-minute discussion on everyday topics) by December 31st by completing a Level B1 online course and attending weekly conversation practice sessions."',
                whyUseSmartGoals: 'Why Use SMART Goals?',
                whyUseSmartGoalsContentIntro: 'The power of the SMART framework lies in its structure and clarity:',
                enhancedClarityFocus: 'Enhanced Clarity & Focus:',
                enhancedClarityFocusContent: 'Eliminates ambiguity, ensuring everyone understands exactly what needs to be done.',
                improvedMotivationCommitment: 'Improved Motivation & Commitment:',
                improvedMotivationCommitmentContent: 'Measurable progress and achievable steps provide milestones that boost motivation and foster a sense of accomplishment.',
                betterResourceAllocation: 'Better Resource Allocation:',
                betterResourceAllocationContent: 'Knowing the specifics helps allocate time, money, and personnel effectively.',
                objectiveEvaluation: 'Objective Evaluation:',
                objectiveEvaluationContent: 'Measurable criteria allow for objective assessment of progress and success, removing subjectivity.',
                increasedAccountability: 'Increased Accountability:',
                increasedAccountabilityContent: 'Clear ownership and deadlines make it easier to track responsibility and performance.',
                higherSuccessRates: 'Higher Success Rates:',
                higherSuccessRatesContent: 'By addressing feasibility and relevance upfront, SMART goals significantly increase the likelihood of actual achievement compared to vague intentions.',
                puttingSmartGoalsIntoPractice: 'Putting SMART Goals into Practice',
                puttingSmartGoalsIntoPracticeContentIntro: 'Implementing SMART goals is straightforward:',
                defineTheObjective: 'Define the Objective:',
                defineTheObjectiveContent: 'Start with your broad ambition.',
                applyTheSmartFilter: 'Apply the SMART Filter:',
                applyTheSmartFilterContent: 'Systematically evaluate and refine the goal against each of the five criteria.',
                documentCommunicate: 'Document & Communicate:',
                documentCommunicateContent: 'Write the goal down clearly using the SMART structure and share it with relevant stakeholders.',
                createActionSteps: 'Create Action Steps:',
                createActionStepsContent: 'Break the SMART goal down into smaller, manageable tasks with their own deadlines.',
                trackProgress: 'Track Progress:',
                trackProgressContent: 'Regularly monitor progress using the measurable criteria. Adjust tactics if needed, but be cautious about changing the core goal unless circumstances drastically shift.',
                reviewReflect: 'Review & Reflect:',
                reviewReflectContent: 'Upon reaching the deadline, evaluate the outcome. What worked? What didn\'t? Apply these lessons to future SMART goals.',
                conclusion: 'Conclusion',
                conclusionContent: 'The SMART goal framework is more than just an acronym; it\'s a proven methodology for turning aspiration into reality. By demanding specificity, measurability, achievability, relevance, and timeliness, it provides the structure necessary for focused effort, effective tracking, and ultimate success. Whether aiming for personal development, career advancement, or organizational targets, applying the SMART principles transforms the daunting task of goal achievement into a clear, manageable, and highly attainable process. Embrace the SMART framework and unlock your potential for meaningful accomplishment.',
                // Removed specific reference titles and descriptions
                readMore: 'Read More',

                // New content for Performance Justification article
                epjTitle: 'The Art and Science of Employee Performance Justification: A Manager\'s Guide for Review Committees',
                epjIntro: 'In the structured ecosystem of performance management, the Employee Performance Justification (EPJ) stands as a critical document. It\'s the bridge between a manager\'s direct observation and the broader organizational perspective represented by the Performance Review Committee (PRC). Far more than just restating a rating, a well-crafted EPJ provides the essential context, evidence, and rationale that transforms a subjective assessment into a defensible, objective decision-making tool for the committee. This article outlines the purpose, key components, and best practices for managers writing effective Performance Justifications.',
                epjPurpose: 'The Crucial Purpose of Performance Justification',
                epjPurposeTransparency: 'Transparency and Accountability:',
                epjPurposeTransparencyContent: 'It forces managers to articulate the "why" behind the rating, moving beyond gut feeling to documented reasoning. This promotes fairness and reduces potential bias.',
                epjPurposeEvidence: 'Evidence-Based Decision Making:',
                epjPurposeEvidenceContent: 'It provides the PRC with concrete examples and data points supporting the manager\'s evaluation, enabling informed deliberations about promotions, compensation, development needs, or performance improvement plans.',
                epjPurposeConsistency: 'Consistency and Calibration:',
                epjPurposeConsistencyContent: 'By requiring managers to explicitly justify ratings using agreed-upon criteria, EPJs help the PRC identify and address inconsistencies across departments or managers, leading to fairer organization-wide outcomes.',
                epjPurposeLegal: 'Legal and Ethical Safeguarding:',
                epjPurposeLegalContent: 'A well-documented justification serves as crucial evidence should a performance rating be challenged, demonstrating the decision was based on objective factors related to the job.',
                epjPurposeDevelopment: 'Development Focus:',
                epjPurposeDevelopmentContent: 'Highlighting specific strengths and weaknesses with concrete examples provides a solid foundation for the PRC to endorse targeted development plans or resources.',
                epjComponents: 'Core Components of an Effective Performance Justification',
                epjOverallRating: 'Overall Performance Rating:',
                epjOverallRatingContent: 'Clearly state the proposed final rating (e.g., Exceeds Expectations, Meets Expectations, Needs Improvement).',
                epjKeyContributions: 'Summary of Key Contributions & Achievements:',
                epjKeyContributionsLink: 'Link to Goals:',
                epjKeyContributionsLinkContent: 'Explicitly connect accomplishments to pre-defined goals and objectives (SMART goals are ideal).',
                epjKeyContributionsQuantifiable: 'Quantifiable Results:',
                epjKeyContributionsQuantifiableContent: 'Prioritize metrics demonstrating impact (e.g., "% increase in sales," "reduced errors by X%," "completed project $Y under budget," "improved customer satisfaction score to Z").',
                epjKeyContributionsQualitative: 'Qualitative Impact:',
                epjKeyContributionsQualitativeContent: 'Describe significant contributions that may be harder to quantify but are valuable (e.g., "led successful cross-functional team initiative," "mentored junior colleague leading to their promotion," "resolved critical client escalation preserving key account").',
                epjKeyContributionsScope: 'Scope & Complexity:',
                epjKeyContributionsScopeContent: 'Contextualize achievements by describing the difficulty, scale, and complexity of the work undertaken.',
                epjAssessmentCompetencies: 'Assessment Against Competencies:',
                epjAssessmentCompetenciesContent: 'Evaluate the employee\'s demonstration of core organizational and role-specific competencies (e.g., Communication, Collaboration, Problem-Solving, Leadership, Technical Expertise).',
                epjBehavioralExamples: 'Provide Specific Behavioral Examples:',
                epjBehavioralExamplesContent: 'For each competency rated, cite concrete instances observed during the review period that illustrate the level of proficiency demonstrated. Avoid vague statements.',
                epjStrengths: 'Strengths:',
                epjStrengthsContent: 'Clearly identify areas of excellence with supporting examples.',
                epjDevelopmentAreas: 'Development Areas:',
                epjDevelopmentAreasContent: 'Honestly identify areas needing improvement, again supported by specific behavioral observations or results gaps. Frame these constructively.',
                epjRationale: 'Rationale for the Rating:',
                epjRationaleContent: 'This is the heart of the justification.',
                epjRationaleSynthesize: 'Synthesize Evidence:',
                epjRationaleSynthesizeContent: 'Explain how the documented achievements and demonstrated competencies collectively support the proposed overall rating.',
                epjRationaleScale: 'Address the Scale:',
                epjRationaleScaleContent: 'Explicitly state how the employee\'s performance compares against the defined standards for each rating level.',
                epjRationaleContext: 'Acknowledge Context (If Relevant):',
                epjRationaleContextContent: 'Briefly mention any significant mitigating circumstances (e.g., major organizational change, market downturn, temporary reassignment) that impacted performance, without using them as excuses for core underperformance.',
                epjRecommendations: 'Recommendations & Forward Look:',
                epjRecommendationsContent: 'Outline clear, actionable next steps endorsed by the manager, based on the performance assessment:',
                epjRecommendationsCompensation: 'Compensation:',
                epjRecommendationsCompensationContent: 'Justify proposed merit increase, bonus, or promotion.',
                epjRecommendationsDevelopment: 'Development Plan:',
                epjRecommendationsDevelopmentContent: 'Propose specific development activities or resources to address skill gaps or prepare for future roles.',
                epjRecommendationsPIP: 'Performance Improvement Plan (PIP):',
                epjRecommendationsPIPContent: 'If applicable, clearly state the rationale for initiating a PIP, referencing specific performance gaps and the failure to meet expectations despite prior feedback.',
                epjBestPractices: 'Best Practices for Managers Writing Justifications',
                epjBestPracticesSpecific: 'Be Specific and Evidence-Based:',
                epjBestPracticesSpecificContent: 'Use concrete examples, data, and observable behaviors. Replace "good communicator" with "consistently produced clear, concise project status reports that were praised by stakeholders, reducing follow-up questions by 30%.".',
                epjBestPracticesObjective: 'Be Objective and Unbiased:',
                epjBestPracticesObjectiveContent: 'Focus on job-related factors and documented performance. Utilize rubrics and competency definitions. Be aware of potential biases (halo/horn effect, recency bias, similarity bias) and actively mitigate them (CIPD, 2023).',
                epjBestPracticesTimely: 'Be Timely:',
                epjBestPracticesTimelyContent: 'Document performance observations throughout the year, not just at review time. Maintain a performance log.',
                epjBestPracticesBalanced: 'Be Balanced:',
                epjBestPracticesBalancedContent: 'Acknowledge both strengths and areas for improvement, even for top performers or those struggling.',
                epjBestPracticesConstructive: 'Be Constructive:',
                epjBestPracticesConstructiveContent: 'Frame development areas as opportunities for growth. Avoid overly harsh or personal language.',
                epjBestPracticesAligned: 'Be Aligned:',
                epjBestPracticesAlignedContent: 'Ensure justifications align with organizational values, strategic priorities, and the defined performance management process.',
                epjBestPracticesConcise: 'Be Concise Yet Comprehensive:',
                epjBestPracticesConciseContent: 'Provide sufficient detail for the PRC to understand the rationale without unnecessary filler. Follow any prescribed templates or formats.',
                epjBestPracticesReference: 'Reference Documentation:',
                epjBestPracticesReferenceContent: 'Explicitly mention supporting documents like project reports, customer feedback, peer reviews, or goal-tracking sheets that the PRC can access if needed.',
                epjCommitteePerspective: 'The Committee\'s Perspective: What Makes a Justification Credible',
                epjCommitteePerspectiveClear: 'Clear and Logical:',
                epjCommitteePerspectiveClearContent: 'The connection between evidence, competency assessment, and final rating is easy to follow.',
                epjCommitteePerspectiveConsistent: 'Consistent:',
                epjCommitteePerspectiveConsistentContent: 'The assessment aligns with the employee\'s history and feedback documented throughout the year.',
                epjCommitteePerspectiveGrounded: 'Grounded in Standards:',
                epjCommitteePerspectiveGroundedContent: 'Ratings are demonstrably linked to the organization\'s defined performance levels and competencies.',
                epjCommitteePerspectiveDataDriven: 'Data-Driven:',
                epjCommitteePerspectiveDataDrivenContent: 'Relies on quantifiable results and specific behavioral observations rather than generalizations.',
                epjCommitteePerspectiveJobRequirements: 'Focused on Job Requirements:',
                epjCommitteePerspectiveJobRequirementsContent: 'Stays relevant to the employee\'s role and responsibilities.',
                epjCommitteePerspectiveForwardLooking: 'Forward-Looking:',
                epjCommitteePerspectiveForwardLookingContent: 'Includes actionable recommendations for development or performance management.',
                epjConclusion: 'Conclusion: The Justification as a Cornerstone of Fairness',
                epjConclusionContent: 'An Employee Performance Justification is not merely administrative paperwork; it is a fundamental exercise in managerial accountability and organizational fairness. By demanding evidence-based reasoning, it elevates the performance review process from subjective opinion to objective evaluation. For the Performance Review Committee, a well-written, credible justification provides the indispensable foundation for making equitable, defensible, and impactful decisions regarding talent recognition, development, and management. Managers who master the art of crafting clear, objective, and evidence-rich justifications contribute significantly to a robust, transparent, and motivating performance culture.',
                epjKeyTakeaways: 'Key Takeaways for Managers:',
                epjKeyTakeawaysEPJ: 'EPJ is Persuasive Evidence:',
                epjKeyTakeawaysEPJContent: 'It\'s your case to the committee.',
                epjKeyTakeawaysSpecificity: 'Specificity is King:',
                epjKeyTakeawaysSpecificityContent: 'Use data, dates, projects, and verbatim feedback.',
                epjKeyTakeawaysAnchor: 'Anchor to Standards:',
                epjKeyTakeawaysAnchorContent: 'Constantly refer back to goals and competency definitions.',
                epjKeyTakeawaysBalance: 'Balance is Essential:',
                epjKeyTakeawaysBalanceContent: 'Show the full picture – strengths and growth areas.',
                epjKeyTakeawaysDocument: 'Document Year-Round:',
                epjKeyTakeawaysDocumentContent: 'Build your justification continuously, not in a panic at year-end.'
            },
            ar: {
                employeePerformanceHub: 'مركز أداء الموظفين',
                appTitle: 'مساعد صياغة الأداء',
                appSubTitle: 'أداة صياغة أداء الموظفين',
                smartGoalsBtn: 'أهداف SMART',
                appraisalFeedbackBtn: 'ملاحظات التقييم',
                performanceNotesBtn: 'ملاحظات الأداء',
                idpBtn: 'خطة التطوير الفردي',
                regularCheckInBtn: 'ملاحظات دورية (مراجعة منتظمة)',
                learnGrowBtn: 'تعلم وتطور',
                smartGoalDrafting: 'صياغة هدف SMART',
                goalName: 'اسم الهدف',
                targetKpi: 'الهدف/مؤشر الأداء الرئيسي',
                deadline: 'الموعد النهائي',
                successCriteriaInputLabel: 'معايير النجاح الخاصة بك (اختياري)',
                generateSubtasks: 'توليد مهام فرعية قابلة للتنفيذ',
                generateSmartGoal: 'توليد هدف SMART',
                generatedDrafts: 'المسودات المتولدة:',
                smartGoalDraft: 'مسودة هدف ذكي',
                goalLabel: 'الهدف:',
                targetKpiLabel: 'الهدف/مؤشر الأداء الرئيسي:',
                suggestedSubtasks: 'المهام الفرعية المقترحة:',
                copyToClipboard: 'نسخ إلى الحافظة',
                copied: 'تم النسخ!',
                failedToCopy: 'فشل نسخ النص. يرجى النسخ يدويًا.',
                fillAllMandatoryFields: 'يرجى ملء جميع الحقول الإلزامية: اسم الهدف، الهدف/مؤشر الأداء الرئيسي، والموعد النهائي.',
                failedToGenerate: 'فشل التوليد:',
                failedToGenerateGoals: 'فشل في توليد أهداف SMART أو تم استلام استجابة فارغة. يرجى محاولة تعديل مدخلاتك.',
                targetKpiNotAvailable: 'غير متاح',
                suggestSuccessCriteria: 'اقتراح معايير النجاح',
                suggestedSuccessCriteria: 'معايير النجاح المقترحة:',

                appraisalFeedback: 'ملاحظات تقييم الأداء',
                selectPerformanceTier: 'اختر مستوى الأداء',
                poorPerformance: 'أداء ضعيف',
                belowExpectations: 'أقل من التوقعات',
                meetExpectations: 'يلبي التوقعات',
                exceedExpectations: 'يتجاوز التوقعات',
                outstanding: 'متميز',
                inputsFor: 'مدخلات لـ',
                employeeDidntAchieveGoals: 'تأكيد بأن الموظف لم يحقق جميع الأهداف',
                documentedExamples: 'أمثلة موثقة للسلوكيات أو النتائج التي أدت إلى هذا التقييم',
                managerSupportExamples: 'أمثلة على الدعم المقدم من المدير لتحسين الأداء',
                strengthsWeaknessesAnalysis: 'تحليل نقاط القوة والضعف',
                projectsGoalsUnmet: 'المشاريع/الأهداف/المبادرات التي لم يتم تحقيق التوقعات فيها',
                documentedBehaviorResults: 'أمثلة موثقة للسلوكيات/النتائج التي لم تحقق التوقعات',
                managerSupportToImprove: 'أمثلة على دعم المدير لتحسين السلوك',
                proposedTrainingPlan: 'خطة تدريب فردية مقترحة',
                skillsForFutureAdvancement: 'المهارات والخبرات المطلوبة للتقدم المستقبلي',
                plannedResponsibilities: 'المسؤوليات المخطط لها',
                accomplishedResponsibilities: 'المسؤوليات المنجزة',
                coreResponsibilities: 'المسؤوليات الأساسية',
                additionalAchievements: 'الإنجازات الإضافية',
                justificationAdditional: 'مبرر للتصنيف "إضافي"',
                achievementsImpact: 'تأثير هذه الإنجازات',
                outstandingSubOption: 'خيار فرعي لمتميز',
                selectAnOption: 'اختر خيارًا',
                workedInRiskAreas: 'عمل في منطقة خطر',
                createdInnovation: 'أوجد ابتكارًا',
                exceededTarget: 'تجاوز الهدف',
                missionDetails: 'تفاصيل المهمة (الموقع، الوقت، سياق المخاطر)',
                solutionDescription: 'وصف الحل',
                businessImpactMetrics: 'مقاييس الأثر التجاري',
                targetSurpassMetrics: 'مقاييس تجاوز الهدف (كمية)',
                impactExceededTarget: 'التأثير',
                generateFeedback: 'توليد ملاحظات',
                generatedFeedback: 'الملاحظات المتولدة:',
                fillAppraisalMandatoryFields: 'الرجاء تحديد مستوى الأداء وملء جميع الحقول الإلزامية للمستوى المحدد.',
                exceededTheTarget: 'تجاوز الهدف',
                additionalResponsibilities: 'مسؤوليات إضافية',
                justificationAdditionalResponsibilities: 'مبرر للمسؤوليات "الإضافية"',
                impactResponsibilitiesAchievements: 'تأثير هذه المسؤوليات / الإنجازات',


                performanceNotes: 'ملاحظات الأداء',
                dateOfObservation: 'تاريخ الملاحظة',
                feedbackType: 'نوع الملاحظة',
                recognition: 'تقدير',
                development: 'تطوير',
                general: 'عام',
                observedBehaviorAction: 'السلوك/الإجراء الملاحظ',
                contextSituation: 'السياق/الوضع',
                impactOutcome: 'التأثير/النتيجة',
                sentimentIndicator: 'مؤشر الشعور',
                positive: 'إيجابي',
                negative: 'سلبي',
                neutral: 'محايد',
                alignmentGoalsValues: 'التوافق مع الأهداف/القيم',
                nextSteps: 'الخطوات التالية',
                generatePerformanceNote: 'توليد ملاحظة أداء',
                generatedNote: 'الملاحظة المتولدة:',
                fillNoteMandatoryFields: 'يرجى ملء جميع الحقول الإلزامية: تاريخ الملاحظة، نوع الملاحظة، السلوك/الإجراء الملاحظ، السياق/الوضع، التأثير/النتيجة، ومؤشر الشعور.',

                idp: 'خطة التطوير الفردي',
                employeeCurrentRole: 'الدور الحالي للموظف',
                currentSkillsStrengths: 'المهارات ونقاط القوة الحالية',
                desiredSkillsDevelopment: 'المهارات/المجالات المرغوبة للتطوير',
                careerAspirations: 'الطموحات المهنية',

                developmentTarget: 'المهارة/الكفاءة/الهدف المستهدف للتطوير',
                developmentActivities: 'أنشطة التطوير',
                addActivity: 'إضافة نشاط',
                trainingCourses: 'التدريب/الدورات',
                workshopsCertifications: 'ورش العمل/الشهادات',
                jobShadowingMentoring: 'التدريب العملي/التوجيه',
                stretchAssignments: 'المهام الصعبة',
                researchTopics: 'مواضيع البحث',
                networking: 'التواصل',
                supportResources: 'الدعم والموارد',
                managerOrgSupport: 'دعم المدير/المنظمة المطلوب',
                budgetTimeEstimates: 'تقديرات الميزانية/الوقت',
                toolsSystemsNeeded: 'الأدوات/الأنظمة المطلوبة',
                activityTypeLabel: 'نوع النشاط',
                detailedDescription: 'وصف تفصيلي',
                addDevelopmentTarget: 'إضافة هدف تطوير',
                removeTarget: 'إزالة الهدف',

                regularCheckInFeedback: 'ملاحظات دورية',
                dateOfCheckIn: 'تاريخ المراجعة',
                progressOnGoals: 'التقدم في الأهداف/المشاريع',
                challenges: 'التحديات/العوائق (اختياري)',
                accomplishments: 'الإنجازات/النقاط البارزة (اختياري)',
                managerObservations: 'ملاحظات المدير/الملاحظات (اختياري)',
                nextStepsCheckIn: 'الخطوات التالية/بنود الإجراءات (اختياري)',
                generateCheckInFeedback: 'توليد ملاحظات دورية',
                generatedCheckInFeedback: 'الملاحظات الدورية المتولدة:',
                fillCheckInMandatoryFields: 'يرجى ملء جميع الحقول الإلزامية للملاحظات الدورية: التاريخ والتقدم في الأهداف.',

                generateIdp: 'توليد خطة تطوير فردي',
                generatedIdpDraft: 'مسودة خطة تطوير فردي المتولدة:',
                fillIdpMandatoryFields: 'يرجى ملء جميع الحقول الإلزامية لخطة التطوير الفردي.',

                placeholderGoalName: 'مثال: زيادة رضا العملاء',
                placeholderTargetKpi: 'مثال: زيادة نقاط NPS بمقدار 10 نقاط',
                placeholderDeadline: 'اختر تاريخًا',
                placeholderSuccessCriteriaInput: 'مثال: تحقيق 90% في مؤشر رضا العملاء',
                placeholderEmployeeDidntAchieveGoals: 'تأكيد ما إذا كان الموظف قد حقق جميع الأهداف (نعم/لا)',
                placeholderDocumentedExamples: 'قدم أمثلة محددة للسلوكيات أو النتائج.',
                placeholderManagerSupportExamples: 'صف الدعم المقدم (مثل: التدريب، التوجيه).',
                placeholderStrengthsWeaknessesAnalysis: 'حلل نقاط القوة الرئيسية ومجالات التطوير.',
                placeholderProjectsGoalsUnmet: 'اذكر المشاريع أو الأهداف التي لم يتم تحقيق التوقعات فيها.',
                placeholderDocumentedBehaviorResults: 'قدم أمثلة على السلوكيات أو النتائج التي لم تحقق التوقعات.',
                placeholderManagerSupportToImprove: 'أمثلة على الدعم الإداري لتحسين السلوك.',
                placeholderProposedTrainingPlan: 'حدد خطة تدريب فردية مقترحة.',
                placeholderSkillsForFutureAdvancement: 'حدد المهارات والمعرفة والخبرات اللازمة للنمو الوظيفي.',
                placeholderPlannedResponsibilities: 'مثال: مسؤول عن تقرير مبيعات الربع الأول، إدارة قاعدة بيانات العملاء.',
                placeholderAccomplishedResponsibilities: 'مثال: تم تسليم تقرير مبيعات الربع الأول في الموعد المحدد، وتم تحديث 95% من سجلات العملاء بنجاح.',
                placeholderCoreResponsibilities: 'صف كيفية أداء المسؤوليات الأساسية.',
                placeholderAdditionalAchievements: 'اذكر بالتفصيل الإنجازات التي تتجاوز المسؤوليات الأساسية.',
                placeholderJustificationAdditional: 'اشرح لماذا تعتبر هذه الإنجازات الإضافية مهمة.',
                placeholderAchievementsImpact: 'صف تأثير هذه الإنجازات.',
                placeholderMissionDetails: 'قدم تفاصيل حول المهمة، الموقع، الوقت، وسياق المخاطر.',
                placeholderSolutionDescription: 'وصف الحل',
                placeholderBusinessImpactMetrics: 'حدد كميًا التأثير التجاري للابتكار (مثل: توفير التكاليف، زيادة الإيرادات).',
                placeholderTargetSurpassMetrics: 'قدم تفاصيل كمية حول كيفية تجاوز الأهداف.',
                placeholderImpactExceededTarget: 'صف تأثير تجاوز الهدف.',
                placeholderObservedBehaviorAction: 'صف السلوك أو الإجراء المحدد الملاحظ.',
                placeholderContextSituation: 'صف الوضع أو السياق الذي حدث فيه السلوك/الإجراء.',
                placeholderImpactOutcome: 'صف التأثير أو النتيجة للسلوك/الإجراء الملاحظ.',
                placeholderSentimentIndicator: 'اختر الشعور',
                placeholderAlignmentGoalsValues: 'اشرح كيف يتوافق السلوك (أو لا يتوافق) مع أهداف أو قيم الشركة.',
                placeholderNextSteps: 'حدد أي إجراءات متابعة أو مناقشات أو خطط.',
                placeholderDevelopmentTarget: 'مثال: إدارة المشاريع، مهارات القيادة',
                placeholderActivityDescription: 'مثال: إكمال دورة شهادة "محترف إدارة المشاريع"',
                placeholderManagerOrgSupport: 'مثال: أن يقدم المدير التوجيه، ميزانية للتدريب الخارجي',
                placeholderBudgetTimeEstimates: 'مثال: 1500 دولار، 40 ساعة على مدى 3 أشهر',
                placeholderToolsSystemsNeeded: 'مثال: الوصول إلى Jira, Salesforce',
                placeholderProgressOnGoals: 'مثال: تم الانتهاء من المرحلة الأولى من المشروع X، وتم الوفاء بجميع المواعيد النهائية.',
                placeholderChallenges: 'مثال: واجهت مشاكل فنية مع البرنامج Y، وتم حلها بالتعاون مع فريق Z.',
                placeholderAccomplishments: 'مثال: تم إطلاق الميزة A بنجاح، وتلقينا ردود فعل إيجابية من المستخدمين.',
                placeholderManagerObservations: "مثال: لاحظت نهج الموظف الاستباقي في حل المشكلات.",
                placeholderNextStepsCheckIn: 'مثال: متابعة تحديثات البرنامج Y، البحث عن فرص تدريب جديدة.',
                learnGrowIntroContent: 'يقدم هذا القسم مصادر ومراجع لممارسات إدارة الأداء الفعالة، مما يساعدك وفريقك على التعلم والنمو:',
                smartGoalsCategory: 'تحقيق الإنجاز: قوة أهداف SMART', // Changed from performancePlanningSubcategory
                smartGoalsCategoryContentIntro: 'يعد تحديد الأهداف أمرًا أساسيًا للتقدم، سواء في حياتنا الشخصية أو المهنية أو في المؤسسات. ومع ذلك، غالبًا ما تتلاشى التطلعات الغامضة مثل "الحصول على اللياقة البدنية" أو "القيام بعمل أفضل في العمل" أو "زيادة المبيعات" في الخلفية، مما يتركنا نشعر بالركود. وهنا تبرز إطار عمل أهداف SMART كأداة قوية وعملية لتحويل الرغبات الغامضة إلى خطط قابلة للتنفيذ والتحقيق. من خلال تطبيق معايير SMART، يزيد الأفراد والفرق بشكل كبير من فرص نجاحهم.',
                whatAreSmartGoals: 'ما هي أهداف SMART؟',
                smartSpecific: 'S - محدد (Specific):',
                smartSpecificContent: 'يجب أن تكون الأهداف واضحة، لا لبس فيها، ومحددة جيدًا. تجيب على الأسئلة: ما الذي يجب إنجازه بالضبط؟ لماذا هو مهم؟ من يشارك؟ أين سيحدث؟ ما هي الموارد أو القيود ذات الصلة؟',
                smartSpecificNotExample: 'غير ذكي: "تحسين خدمة العملاء."',
                smartSpecificExample: 'ذكي: "تقليل متوسط وقت انتظار مكالمات العملاء بنسبة 15% داخل قسم الدعم بحلول الربع الرابع من خلال توظيف وكيلين إضافيين وتطبيق برنامج جديد لتوجيه المكالمات."',
                smartMeasurable: 'M - قابل للقياس (Measurable):',
                smartMeasurableContent: 'يجب أن تتضمن الأهداف معايير ملموسة لتتبع التقدم وتحديد متى تم تحقيق الهدف. كم؟ كم عدد؟ كيف ستعرف أنك نجحت؟',
                smartMeasurableNotExample: 'غير ذكي: "كتابة المزيد من التقارير."',
                smartMeasurableExample: 'ذكي: "إكمال وتقديم تقرير التحليل المالي الشهري بحلول اليوم الخامس من كل شهر للأشهر الستة القادمة."',
                smartAchievable: 'A - قابل للتحقيق (Achievable or Attainable):',
                smartAchievableContent: 'يجب أن تكون الأهداف واقعية وقابلة للتحقيق، بالنظر إلى الموارد والمهارات والوقت المتاح. بينما يجب أن تتحدى القدرات، يجب ألا تكون مستحيلة. هل الهدف ممكن؟',
                smartAchievableNotExample: 'غير ذكي: "مضاعفة حصة الشركة في السوق في شهر واحد."',
                smartAchievableExample: 'ذكي: "زيادة حصة السوق بنسبة 5% في منطقة الشمال الشرقي بحلول نهاية السنة المالية من خلال حملة تسويق رقمي مستهدفة وشراكة مع اثنين من الموزعين الإقليميين."',
                smartRelevant: 'R - ذو صلة (Relevant or Realistic):',
                smartRelevantContent: 'يجب أن تكون الأهداف مهمة وتتوافق مع الأهداف الأوسع. هل يساهم هذا الهدف في المهمة الأكبر أو الخطة الاستراتيجية؟ هل هذا هو الوقت المناسب؟ هل يتناسب مع السياق الحالي؟',
                smartRelevantNotExample: 'غير ذكي (لمهندس مبتدئ): "أصبح الرئيس التنفيذي العام القادم."',
                smartRelevantExample: 'ذكي: "إكمال شهادة إدارة المشاريع المتقدمة خلال الـ 12 شهرًا القادمة للتأهل لدور مهندس أول، بما يتماشى مع هدف القسم لتعزيز القيادة الفنية."',
                smartTimeBound: 'T - محدد بوقت (Time-bound):',
                smartTimeBoundContent: 'تحتاج الأهداف إلى موعد نهائي أو إطار زمني محدد بوضوح. هذا يخلق شعورًا بالإلحاح، ويمنع التسويف، ويوفر هدفًا للعمل نحوه. متى سيتم تحقيق ذلك؟ ماذا يمكن أن يتم اليوم؟ في ستة أسابيع؟',
                smartTimeBoundNotExample: 'غير ذكي: "تعلم اللغة الإسبانية."',
                smartTimeBoundExample: 'ذكي: "تحقيق الطلاقة في اللغة الإسبانية (القدرة على إجراء مناقشة لمدة 30 دقيقة حول مواضيع يومية) بحلول 31 ديسمبر من خلال إكمال دورة عبر الإنترنت من المستوى B1 وحضور جلسات ممارسة المحادثة الأسبوعية."',
                whyUseSmartGoals: 'لماذا نستخدم أهداف SMART؟',
                whyUseSmartGoalsContentIntro: 'تكمن قوة إطار عمل SMART في هيكله ووضوحه:',
                enhancedClarityFocus: 'وضوح وتركيز معزز:',
                enhancedClarityFocusContent: 'يزيل الغموض، ويضمن فهم الجميع لما يجب القيام به بالضبط.',
                improvedMotivationCommitment: 'تحسين الدافع والالتزام:',
                improvedMotivationCommitmentContent: 'يوفر التقدم القابل للقياس والخطوات القابلة للتحقيق معالم تعزز الدافع وتنمي الشعور بالإنجاز.',
                betterResourceAllocation: 'تخصيص أفضل للموارد:',
                betterResourceAllocationContent: 'معرفة التفاصيل تساعد في تخصيص الوقت والمال والموظفين بفعالية.',
                objectiveEvaluation: 'تقييم موضوعي:',
                objectiveEvaluationContent: 'تسمح المعايير القابلة للقياس بالتقييم الموضوعي للتقدم والنجاح، مما يزيل الذاتية.',
                increasedAccountability: 'زيادة المساءلة:',
                increasedAccountabilityContent: 'الملكية الواضحة والمواعيد النهائية تسهل تتبع المسؤولية والأداء.',
                higherSuccessRates: 'معدلات نجاح أعلى:',
                higherSuccessRatesContent: 'من خلال معالجة الجدوى والملاءمة مقدمًا، تزيد أهداف SMART بشكل كبير من احتمالية التحقيق الفعلي مقارنة بالنوايا الغامضة.',
                puttingSmartGoalsIntoPractice: 'تطبيق أهداف SMART عمليًا',
                puttingSmartGoalsIntoPracticeContentIntro: 'تطبيق أهداف SMART بسيط ومباشر:',
                defineTheObjective: 'تحديد الهدف:',
                defineTheObjectiveContent: 'ابدأ بطموحك العام.',
                applyTheSmartFilter: 'تطبيق مرشح SMART:',
                applyTheSmartFilterContent: 'قم بتقييم الهدف وتحسينه بشكل منهجي مقابل كل من المعايير الخمسة.',
                documentCommunicate: 'التوثيق والتواصل:',
                documentCommunicateContent: 'اكتب الهدف بوضوح باستخدام هيكل SMART وشاركه مع أصحاب المصلحة المعنيين.',
                createActionSteps: 'إنشاء خطوات عمل:',
                createActionStepsContent: 'قسّم هدف SMART إلى مهام أصغر يمكن إدارتها بمواعيد نهائية خاصة بها.',
                trackProgress: 'تتبع التقدم:',
                trackProgressContent: 'راقب التقدم بانتظام باستخدام المعايير القابلة للقياس. اضبط التكتيكات إذا لزم الأمر، ولكن كن حذرًا بشأن تغيير الهدف الأساسي ما لم تتغير الظروف بشكل جذري.',
                reviewReflect: 'المراجعة والتفكير:',
                reviewReflectContent: 'عند الوصول إلى الموعد النهائي، قم بتقييم النتيجة. ما الذي نجح؟ وما الذي لم ينجح؟ طبق هذه الدروس على أهداف SMART المستقبلية.',
                conclusion: 'الخلاصة',
                conclusionContent: 'إطار عمل أهداف SMART هو أكثر من مجرد اختصار؛ إنه منهجية مثبتة لتحويل الطموح إلى واقع. من خلال المطالبة بالدقة، والقابلية للقياس، والقابلية للتحقيق، والأهمية، والتحديد الزمني، فإنه يوفر الهيكل اللازم للجهد المركز، والتتبع الفعال، والنجاح النهائي. سواء كنت تهدف إلى التطوير الشخصي، أو التقدم الوظيفي، أو الأهداف التنظيمية، فإن تطبيق مبادئ SMART يحول مهمة تحقيق الأهداف الشاقة إلى عملية واضحة، قابلة للإدارة، وقابلة للتحقيق بدرجة كبيرة. احتضن إطار عمل SMART واطلق العنان لإمكانياتك لتحقيق إنجازات ذات مغزى.',
                // Removed specific reference titles and descriptions
                readMore: 'اقرا المزيد',

                // New content for Performance Justification article
                epjTitle: 'فن وعلم تبرير أداء الموظف: دليل المدير للجان المراجعة',
                epjIntro: 'في النظام البيئي المنظم لإدارة الأداء، يعتبر تبرير أداء الموظف (EPJ) وثيقة بالغة الأهمية. إنه الجسر بين الملاحظة المباشرة للمدير والمنظور التنظيمي الأوسع الذي تمثله لجنة مراجعة الأداء (PRC). أكثر بكثير من مجرد إعادة ذكر التقييم، يوفر تبرير أداء الموظف المصاغ جيدًا السياق الأساسي والأدلة والمنطق الذي يحول التقييم الذاتي إلى أداة صنع قرار قابلة للدفاع وموضوعية للجنة. تحدد هذه المقالة الغرض والمكونات الرئيسية وأفضل الممارسات للمديرين الذين يكتبون تبريرات أداء فعالة.',
                epjPurpose: 'الغرض الأساسي من تبرير الأداء',
                epjPurposeTransparency: 'الشفافية والمساءلة:',
                epjPurposeTransparencyContent: 'يجبر المديرين على توضيح "السبب" وراء التقييم، متجاوزين الشعور الغريزي إلى التفكير الموثق. هذا يعزز العدالة ويقلل من التحيز المحتمل.',
                epjPurposeEvidence: 'اتخاذ القرارات القائمة على الأدلة:',
                epjPurposeEvidenceContent: 'يوفر للجنة مراجعة الأداء أمثلة ملموسة ونقاط بيانات تدعم تقييم المدير، مما يتيح مداولات مستنيرة حول الترقيات، التعويضات، احتياجات التطوير، أو خطط تحسين الأداء.',
                epjPurposeConsistency: 'الاتساق والمعايرة:',
                epjPurposeConsistencyContent: 'من خلال مطالبة المديرين بتبرير التقييمات صراحة باستخدام معايير متفق عليها، تساعد تبريرات أداء الموظف لجنة مراجعة الأداء على تحديد ومعالجة التناقضات بين الأقسام أو المديرين، مما يؤدي إلى نتائج أكثر عدلاً على مستوى المنظمة.',
                epjPurposeLegal: 'الحماية القانونية والأخلاقية:',
                epjPurposeLegalContent: 'يعمل التبرير الموثق جيدًا كدليل حاسم في حال الطعن في تقييم الأداء، مما يدل على أن القرار استند إلى عوامل موضوعية تتعلق بالوظيفة.',
                epjPurposeDevelopment: 'التركيز على التطوير:',
                epjPurposeDevelopmentContent: 'تسليط الضوء على نقاط القوة والضعف المحددة بأمثلة ملموسة يوفر أساسًا متينًا للجنة مراجعة الأداء للموافقة على خطط أو موارد تطوير مستهدفة.',
                epjComponents: 'المكونات الأساسية لتبرير الأداء الفعال',
                epjOverallRating: 'التقييم العام للأداء:',
                epjOverallRatingContent: 'اذكر بوضوح التقييم النهائي المقترح (مثل: يتجاوز التوقعات، يلبي التوقعات، يحتاج إلى تحسين).',
                epjKeyContributions: 'ملخص المساهمات والإنجازات الرئيسية:',
                epjKeyContributionsLink: 'الربط بالأهداف:',
                epjKeyContributionsLinkContent: 'ربط الإنجازات صراحة بالأهداف المحددة مسبقًا (أهداف SMART مثالية).',
                epjKeyContributionsQuantifiable: 'النتائج القابلة للقياس الكمي:',
                epjKeyContributionsQuantifiableContent: 'إعطاء الأولوية للمقاييس التي توضح التأثير (مثل: "زيادة بنسبة % في المبيعات"، "تقليل الأخطاء بنسبة X%"، "إكمال المشروع بتكلفة أقل من الميزانية بـ Y دولار"، "تحسين نقاط رضا العملاء إلى Z").',
                epjKeyContributionsQualitative: 'التأثير النوعي:',
                epjKeyContributionsQualitativeContent: 'وصف المساهمات الهامة التي قد يكون من الصعب قياسها كميًا ولكنها ذات قيمة (مثل: "قاد مبادرة فريق متعدد الوظائف بنجاح"، "وجه زميلًا مبتدئًا مما أدى إلى ترقيته"، "حل تصعيدًا حرجًا للعميل مما حافظ على حساب رئيسي").',
                epjKeyContributionsScope: 'النطاق والتعقيد:',
                epjKeyContributionsQuantifiableContent: 'تحديد أولويات المقاييس التي توضح التأثير (على سبيل المثال، "زيادة بنسبة % في المبيعات"، "تقليل الأخطاء بنسبة X%"، "إكمال المشروع بميزانية أقل من Y دولار"، "تحسين درجة رضا العملاء إلى Z").', // Corrected to use the right translation key
                epjKeyContributionsScopeContent: 'تحديد سياق الإنجازات من خلال وصف صعوبة العمل المنجز وحجمه وتعقيده.',
                epjAssessmentCompetencies: 'التقييم مقابل الكفاءات:',
                epjAssessmentCompetenciesContent: 'تقييم مدى إظهار الموظف للكفاءات التنظيمية والخاصة بالدور (مثل: التواصل، التعاون، حل المشكلات، القيادة، الخبرة الفنية).',
                epjBehavioralExamples: 'تقديم أمثلة سلوكية محددة:',
                epjBehavioralExamplesContent: 'لكل كفاءة تم تقييمها، اذكر أمثلة ملموسة تمت ملاحظتها خلال فترة المراجعة توضح مستوى الكفاءة الذي تم إظهاره. تجنب العبارات الغامضة.',
                epjStrengths: 'نقاط القوة:',
                epjStrengthsContent: 'تحديد مجالات التميز بوضوح مع أمثلة داعمة.',
                epjDevelopmentAreas: 'مجالات التطوير:',
                epjDevelopmentAreasContent: 'تحديد المجالات التي تحتاج إلى تحسين بصدق، مدعومة مرة أخرى بملاحظات سلوكية محددة أو فجوات في النتائج. صياغة هذه بشكل بناء.',
                epjRationale: 'مبرر التقييم:',
                epjRationaleContent: 'هذا هو جوهر التبرير.',
                epjRationaleSynthesize: 'تجميع الأدلة:',
                epjRationaleSynthesizeContent: 'اشرح كيف تدعم الإنجازات الموثقة والكفاءات الموضحة مجتمعة التقييم العام المقترح.',
                epjRationaleScale: 'معالجة المقياس:',
                epjRationaleScaleContent: 'اذكر صراحة كيف يقارن أداء الموظف بالمعايير المحددة لكل مستوى تقييم.',
                epjRationaleContext: 'الإقرار بالسياق (إذا كان ذا صلة):',
                epjRationaleContextContent: 'اذكر باختصار أي ظروف مخففة مهمة (مثل: تغيير تنظيمي كبير، تراجع السوق، إعادة تعيين مؤقتة) أثرت على الأداء، دون استخدامها كأعذار للأداء الضعيف الأساسي.',
                epjRecommendations: 'التوصيات والنظرة المستقبلية:',
                epjRecommendationsContent: 'تحديد الخطوات التالية الواضحة والقابلة للتنفيذ التي يوافق عليها المدير، بناءً على تقييم الأداء:',
                epjRecommendationsCompensation: 'التعويضات:',
                epjRecommendationsCompensationContent: 'تبرير الزيادة المقترحة في الراتب، أو المكافأة، أو الترقية.',
                epjRecommendationsDevelopment: 'خطة التطوير:',
                epjRecommendationsDevelopmentContent: 'اقتراح أنشطة أو موارد تطوير محددة لمعالجة فجوات المهارات أو التحضير لأدوار مستقبلية.',
                epjRecommendationsPIP: 'خطة تحسين الأداء (PIP):',
                epjRecommendationsPIPContent: 'إذا كان ذلك منطبقًا، اذكر بوضوح الأساس المنطقي لبدء خطة تحسين الأداء، مع الإشارة إلى فجوات الأداء المحددة والفشل في تلبية التوقعات على الرغم من الملاحظات السابقة.',
                epjBestPractices: 'أفضل الممارسات للمديرين عند كتابة التبريرات',
                epjBestPracticesSpecific: 'كن محددًا وقائمًا على الأدلة:',
                epjBestPracticesSpecificContent: 'استخدم أمثلة ملموسة، وبيانات، وسلوكيات قابلة للملاحظة. استبدل "متواصل جيد" بـ "أنتج باستمرار تقارير حالة مشروع واضحة وموجزة أشاد بها أصحاب المصلحة، مما قلل من أسئلة المتابعة بنسبة 30%".',
                epjBestPracticesObjective: 'كن موضوعيًا وغير متحيز:',
                epjBestPracticesObjectiveContent: 'ركز على العوامل المتعلقة بالوظيفة والأداء الموثق. استخدم القوالب وتعريفات الكفاءة. كن على دراية بالتحيزات المحتملة (تأثير الهالة/القرن، تحيز الحداثة، تحيز التشابه) وتخفيفها بنشاط (CIPD، 2023).',
                epjBestPracticesTimely: 'كن في الوقت المناسب:',
                epjBestPracticesTimelyContent: 'وثق ملاحظات الأداء على مدار العام، وليس فقط في وقت المراجعة. احتفظ بسجل أداء.',
                epjBestPracticesBalanced: 'كن متوازنًا:',
                epjBestPracticesBalancedContent: 'اعترف بنقاط القوة ومجالات التحسين، حتى بالنسبة لأفضل الأداء أو أولئك الذين يواجهون صعوبات.',
                epjBestPracticesConstructive: 'كن بناءً:',
                epjBestPracticesConstructiveContent: 'صياغة مجالات التطوير كفرص للنمو. تجنب اللغة القاسية أو الشخصية بشكل مفرط.',
                epjBestPracticesAligned: 'كن متوافقًا:',
                epjBestPracticesAlignedContent: 'تأكد من توافق التبريرات مع القيم التنظيمية، والأولويات الاستراتيجية، وعملية إدارة الأداء المحددة.',
                epjBestPracticesConcise: 'كن موجزًا وشاملًا في نفس الوقت:',
                epjBestPracticesConciseContent: 'قدم تفاصيل كافية للجنة مراجعة الأداء لفهم الأساس المنطقي دون حشو غير ضروري. اتبع أي قوالب أو تنسيقات محددة.',
                epjBestPracticesReference: 'توثيق المراجع:',
                epjBestPracticesReferenceContent: 'اذكر صراحة المستندات الداعمة مثل تقارير المشروع، وملاحظات العملاء، ومراجعات الزملاء، أو أوراق تتبع الأهداف التي يمكن للجنة مراجعة الأداء الوصول إليها إذا لزم الأمر.',
                epjCommitteePerspective: 'منظور اللجنة: ما الذي يجعل التبرير موثوقًا به',
                epjCommitteePerspectiveClear: 'واضح ومنطقي:',
                epjCommitteePerspectiveClearContent: 'الصلة بين الأدلة وتقييم الكفاءة والتقييم النهائي سهلة المتابعة.',
                epjCommitteePerspectiveConsistent: 'متسق:',
                epjCommitteePerspectiveConsistentContent: 'يتوافق التقييم مع تاريخ الموظف والملاحظات الموثقة على مدار العام.',
                epjCommitteePerspectiveGrounded: 'مستند إلى المعايير:',
                epjCommitteePerspectiveGroundedContent: 'ترتبط التقييمات بشكل واضح بمستويات الأداء والكفاءات المحددة للمنظمة.',
                epjCommitteePerspectiveDataDriven: 'مدفوع بالبيانات:',
                epjCommitteePerspectiveDataDrivenContent: 'يعتمد على النتائج القابلة للقياس الكمي والملاحظات السلوكية المحددة بدلاً من التعميمات.',
                epjCommitteePerspectiveJobRequirements: 'يركز على متطلبات الوظيفة:',
                epjCommitteePerspectiveJobRequirementsContent: 'يبقى ذا صلة بدور الموظف ومسؤولياته.',
                epjCommitteePerspectiveForwardLooking: 'تطلعي:',
                epjCommitteePerspectiveForwardLookingContent: 'يتضمن توصيات قابلة للتنفيذ للتطوير أو إدارة الأداء.',
                epjConclusion: 'الخلاصة: التبرير حجر الزاوية في العدالة',
                epjConclusionContent: 'تبرير أداء الموظف ليس مجرد عمل إداري؛ إنه ممارسة أساسية في مساءلة المديرين والعدالة التنظيمية. من خلال المطالبة بمنطق قائم على الأدلة، فإنه يرفع عملية مراجعة الأداء من الرأي الذاتي إلى التقييم الموضوعي. بالنسبة للجنة مراجعة الأداء، يوفر التبرير المكتوب جيدًا والموثوق به الأساس الذي لا غنى عنه لاتخاذ قرارات عادلة وقابلة للدفاع وذات تأثير فيما يتعلق بالتعرف على المواهب وتطويرها وإدارتها. يساهم المديرون الذين يتقنون فن صياغة تبريرات واضحة وموضوعية وغنية بالأدلة بشكل كبير في ثقافة أداء قوية وشفافة ومحفزة.',
                epjKeyTakeaways: 'النقاط الرئيسية للمديرين:',
                epjKeyTakeawaysEPJ: 'تبرير أداء الموظف هو دليل مقنع:',
                epjKeyTakeawaysEPJContent: 'إنها قضيتك أمام اللجنة.',
                epjKeyTakeawaysSpecificity: 'التحديد هو الأهم:',
                epjKeyTakeawaysSpecificityContent: 'استخدم البيانات والتواريخ والمشاريع والملاحظات الحرفية.',
                epjKeyTakeawaysAnchor: 'الربط بالمعايير:',
                epjKeyTakeawaysAnchorContent: 'ارجع باستمرار إلى الأهداف وتعريفات الكفاءات.',
                epjKeyTakeawaysBalance: 'التوازن ضروري:',
                epjKeyTakeawaysBalanceContent: 'أظهر الصورة الكاملة - نقاط القوة ومجالات النمو.',
                epjKeyTakeawaysDocument: 'وثق على مدار العام:',
                epjKeyTakeawaysDocumentContent: 'ابنِ تبريرك باستمرار، وليس في حالة ذعر في نهاية العام.'
            }
        };

        let currentLanguage = localStorage.getItem('appLanguage') || 'en';
        let activeModuleRenderer = renderSmartGoalDrafting; // Keep track of the currently active module renderer

        /**
         * Calls the Gemini API with the given prompt and optional schema.
         * @param {string} prompt The text prompt to send to the Gemini API.
         * @param {object|null} schema Optional JSON schema for structured responses.
         * @returns {Promise<string|object>} The generated text or parsed JSON object.
         */
        async function callGeminiApi(prompt, schema = null) {
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            // For structured output, add generationConfig
            if (schema) {
                payload.generationConfig = {
                    responseMimeType: "application/json",
                    responseSchema: schema
                };
            }

            const apiKey = ""; // If you want to use models other than gemini-2.0-flash or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    if (schema) {
                        try {
                            return JSON.parse(text);
                        } catch (e) {
                            console.error("Failed to parse JSON response:", e);
                            return null;
                        }
                    } else {
                        return text;
                    }
                } else {
                    console.error("Unexpected API response structure:", result);
                    return null;
                }
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                return null;
            }
        }


        /**
         * Applies translations to all elements with a `data-i18n` attribute.
         */
        function applyTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
            // Update placeholders dynamically as well
            const placeholders = {
                'goalNameInput': 'placeholderGoalName',
                'targetKpiInput': 'placeholderTargetKpi',
                'deadlineInput': 'placeholderDeadline',
                'successCriteriaInput': 'placeholderSuccessCriteriaInput',
                'employeeDidntAchieveGoals': 'placeholderEmployeeDidntAchieveGoals',
                'documentedExamples': 'placeholderDocumentedExamples',
                'managerSupportExamples': 'placeholderManagerSupportExamples',
                'strengthsWeaknessesAnalysis': 'placeholderStrengthsWeaknessesAnalysis',
                'projectsGoalsUnmet': 'placeholderProjectsGoalsUnmet',
                'documentedBehaviorResults': 'placeholderDocumentedBehaviorResults',
                'managerSupportToImprove': 'placeholderManagerSupportToImprove',
                'proposedTrainingPlan': 'placeholderProposedTrainingPlan',
                // 'skillsForFutureAdvancement': 'placeholderSkillsForFutureAdvancement', // Removed as per request
                'plannedResponsibilities': 'placeholderPlannedResponsibilities', // This is no longer used in meetExpectations, but kept for consistency in translations
                'accomplishedResponsibilities': 'placeholderAccomplishedResponsibilities',
                'coreResponsibilities': 'placeholderCoreResponsibilities',
                'additionalAchievements': 'placeholderAdditionalAchievements',
                'justificationAdditional': 'placeholderJustificationAdditional',
                'achievementsImpact': 'placeholderAchievementsImpact',
                'missionDetails': 'placeholderMissionDetails',
                'solutionDescription': 'placeholderSolutionDescription',
                'businessImpactMetrics': 'placeholderBusinessImpactMetrics',
                'targetSurpassMetrics': 'placeholderTargetSurpassMetrics',
                'impactExceededTarget': 'placeholderImpactExceededTarget',
                'observedBehaviorAction': 'placeholderObservedBehaviorAction',
                'contextSituation': 'placeholderContextSituation',
                'impactOutcome': 'placeholderImpactOutcome',
                'alignmentGoalsValues': 'placeholderAlignmentGoalsValues',
                'nextSteps': 'placeholderNextSteps',
                'developmentTarget': 'placeholderDevelopmentTarget',
                'activityDescription': 'placeholderActivityDescription',
                'managerOrgSupport': 'placeholderManagerOrgSupport',
                'budgetTimeEstimates': 'placeholderBudgetTimeEstimates',
                'toolsSystemsNeeded': 'placeholderToolsSystemsNeeded',
                'progressOnGoals': 'placeholderProgressOnGoals',
                'challenges': 'placeholderChallenges',
                'accomplishments': 'placeholderAccomplishments',
                'managerObservations': 'placeholderManagerObservations',
                'nextStepsCheckIn': 'placeholderNextStepsCheckIn',
                'sentimentIndicator': 'placeholderSentimentIndicator' // For select elements
            };

            for (const id in placeholders) {
                const element = document.getElementById(id);
                if (element && translations[currentLanguage] && translations[currentLanguage][placeholders[id]]) {
                    if (element.tagName === 'SELECT') {
                         // Update options for select elements
                        Array.from(element.options).forEach(option => {
                            const optionKey = option.getAttribute('data-i18n');
                            if (optionKey && translations[currentLanguage] && translations[currentLanguage][optionKey]) {
                                option.textContent = translations[currentLanguage][optionKey];
                            }
                        });
                        // Update the default selected option text if it's dynamic
                        if (element.value === "" && translations[currentLanguage] && translations[currentLanguage][placeholders[id]]) {
                            element.querySelector('option[value=""]').textContent = translations[currentLanguage][placeholders[id]];
                        }
                    } else {
                        element.placeholder = translations[currentLanguage][placeholders[id]];
                    }
                }
            }
        }


        /**
         * Sets the application language and updates the UI.
         * @param {string} lang The language code ('en' or 'ar').
         */
        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('appLanguage', lang);
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            applyTranslations();
            updateActiveLangButton();
            // Re-render the active module to apply language-specific content
            if (activeModuleRenderer) {
                activeModuleRenderer();
            }
        }

        /**
         * Updates the active state of language buttons.
         */
        function updateActiveLangButton() {
            document.querySelectorAll('.lang-button').forEach(button => {
                button.classList.remove('active');
                if (button.id === `lang-${currentLanguage}`) {
                    button.classList.add('active');
                }
            });
        }

        /**
         * Displays a temporary message (success or error).
         * @param {string} message The message to display.
         * @param {string} type The type of message ('success' or 'error').
         * @param {HTMLElement} container The element to append the message to.
         */
        function displayMessage(message, type, container) {
            const messageElement = document.createElement('div');
            messageElement.textContent = message;
            messageElement.className = `error-message ${type === 'success' ? 'bg-linkedin-green' : 'bg-linkedin-red'} text-white p-3 rounded-md mb-4 text-center`;
            container.prepend(messageElement);
            setTimeout(() => {
                messageElement.remove();
            }, 5000);
        }

        /**
         * Copies text to the clipboard.
         * @param {string} text The text to copy.
         * @param {HTMLElement} buttonElement The button element that triggered the copy.
         */
        function copyTextToClipboard(text, buttonElement) {
            const originalText = buttonElement.innerHTML;
            const outputContainer = buttonElement.closest('.output-item') || document.getElementById('app-content'); // Fallback

            // Use execCommand for broader compatibility within iframes
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed'; // Avoid scrolling to bottom
            textarea.style.left = '-9999px'; // Hide off-screen
            document.body.appendChild(textarea);
            textarea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    buttonElement.innerHTML = `${checkIcon} ${translations[currentLanguage].copied}`;
                    displayMessage(translations[currentLanguage].copied, 'success', outputContainer);
                } else {
                    throw new Error('Fallback copy failed');
                }
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
                displayMessage(translations[currentLanguage].failedToCopy, 'error', outputContainer);
            } finally {
                document.body.removeChild(textarea);
                setTimeout(() => {
                    buttonElement.innerHTML = originalText;
                }, 2000);
            }
        }

        /**
         * Renders the SMART Goal Drafting module.
         */
        function renderSmartGoalDrafting() {
            const appContent = document.getElementById('app-content');
            appContent.innerHTML = `
                <section class="module-section">
                    <h3 class="text-2xl font-bold mb-6 text-center text-linkedin-blue-dark" data-i18n="smartGoalDrafting">SMART Goal Drafting</h3>
                    <div class="input-group">
                        <label for="goalNameInput" data-i18n="goalName">Goal Name</label>
                        <input type="text" id="goalNameInput" class="rounded-md" placeholder="${translations[currentLanguage].placeholderGoalName}">
                    </div>
                    <div class="input-group">
                        <label for="targetKpiInput" data-i18n="targetKpi">Target/KPI</label>
                        <input type="text" id="targetKpiInput" class="rounded-md" placeholder="${translations[currentLanguage].placeholderTargetKpi}">
                    </div>
                    <div class="input-group">
                        <label for="deadlineInput" data-i18n="deadline">Deadline</label>
                        <input type="date" id="deadlineInput" class="rounded-md" placeholder="${translations[currentLanguage].placeholderDeadline}">
                    </div>
                    <div class="input-group">
                        <label for="successCriteriaInput" data-i18n="successCriteriaInputLabel">Your Success Criteria (Optional)</label>
                        <textarea id="successCriteriaInput" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderSuccessCriteriaInput}"></textarea>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="generateSubtasksCheckbox">
                        <label for="generateSubtasksCheckbox" data-i18n="generateSubtasks">Generate actionable subtasks</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="suggestSuccessCriteriaCheckbox">
                        <label for="suggestSuccessCriteriaCheckbox" data-i18n="suggestSuccessCriteria">Suggest success criteria</label>
                    </div>
                    <button id="generateSmartGoalBtn" class="button-generate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg>
                        <span data-i18n="generateSmartGoal">Generate SMART Goal</span>
                    </button>
                    <div id="smartGoalOutput" class="output-area hidden">
                        <h3 class="mb-4" data-i18n="generatedDrafts">Generated Drafts:</h3>
                    </div>
                </section>
            `;
            applyTranslations(); // Apply translations after rendering static HTML

            const generateButton = document.getElementById('generateSmartGoalBtn');
            const smartGoalOutput = document.getElementById('smartGoalOutput');
            const goalNameInput = document.getElementById('goalNameInput');
            const targetKpiInput = document.getElementById('targetKpiInput');
            const deadlineInput = document.getElementById('deadlineInput');
            const successCriteriaInput = document.getElementById('successCriteriaInput');
            const generateSubtasksCheckbox = document.getElementById('generateSubtasksCheckbox');
            const suggestSuccessCriteriaCheckbox = document.getElementById('suggestSuccessCriteriaCheckbox');
            const moduleSection = appContent.querySelector('.module-section');


            generateButton.onclick = async () => {
                const goalName = goalNameInput.value.trim();
                const targetKpi = targetKpiInput.value.trim();
                const deadline = deadlineInput.value.trim();
                const userSuccessCriteria = successCriteriaInput.value.trim();
                const shouldGenerateSubtasks = generateSubtasksCheckbox.checked;
                const shouldSuggestSuccessCriteria = suggestSuccessCriteriaCheckbox.checked;

                if (!goalName || !targetKpi || !deadline) {
                    displayMessage(translations[currentLanguage].fillAllMandatoryFields, 'error', moduleSection);
                    return;
                }

                generateButton.disabled = true;
                generateButton.innerHTML = `${loaderIcon} ${translations[currentLanguage].generateSmartGoal}`;
                smartGoalOutput.classList.add('hidden'); // Hide previous output

                let prompt = `As an HR assistant, draft 3 distinct SMART goals based on the following details, considering the user's language preference (${currentLanguage}). Each goal should be Specific, Measurable, Achievable, Relevant, and Time-bound. If requested, include actionable subtasks and suggested success criteria for each goal:\n\n`;
                prompt += `Goal Name: ${goalName}\n`;
                prompt += `Target/KPI: ${targetKpi}\n`;
                prompt += `Deadline: ${deadline}\n`;

                if (userSuccessCriteria) {
                    prompt += `User-provided Success Criteria: ${userSuccessCriteria}\n`;
                }

                const schema = {
                    type: "ARRAY",
                    items: {
                        type: "OBJECT",
                        properties: {
                            smartGoal: { "type": "STRING" },
                            subtasks: {
                                type: "ARRAY",
                                items: { "type": "STRING" }
                            },
                            suggestedSuccessCriteria: {
                                type: "ARRAY",
                                items: { "type": "STRING" }
                            }
                        },
                        propertyOrdering: ["smartGoal", "subtasks", "suggestedSuccessCriteria"]
                    }
                };

                let generatedContents;
                try {
                    generatedContents = await callGeminiApi(prompt, schema);
                } catch (error) {
                    console.error("Error during API call for SMART Goal:", error);
                    displayMessage(`${translations[currentLanguage].failedToGenerate} ${error.message}`, 'error', moduleSection);
                    generateButton.disabled = false;
                    generateButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateSmartGoal">${translations[currentLanguage].generateSmartGoal}</span>`;
                    return;
                }

                generateButton.disabled = false;
                generateButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateSmartGoal">${translations[currentLanguage].generateSmartGoal}</span>`;


                if (generatedContents && generatedContents.length > 0) {
                    smartGoalOutput.innerHTML = `<h3 class="mb-4" data-i18n="generatedDrafts">Generated Drafts:</h3>`;

                    generatedContents.forEach((content, index) => {
                        // SMART Goal Draft
                        const goalItem = document.createElement('div');
                        goalItem.className = 'output-item';
                        goalItem.innerHTML = `
                            <h4>${translations[currentLanguage].smartGoalDraft} ${index + 1}</h4>
                            <p><strong data-i18n="goalLabel">Goal:</strong> ${content.smartGoal}</p>
                            <p><strong data-i18n="targetKpiLabel">Target/KPI:</strong> ${targetKpi || translations[currentLanguage].targetKpiNotAvailable}</p>
                            <p><strong>${translations[currentLanguage].deadline}:</strong> ${deadline}</p>
                            <button class="copy-button">${copyIcon} <span data-i18n="copyToClipboard">${translations[currentLanguage].copyToClipboard}</span></button>
                        `;
                        goalItem.querySelector('.copy-button').onclick = (e) => {
                            e.preventDefault();
                            const textToCopy = `Goal: ${content.smartGoal}\nTarget/KPI: ${targetKpi || translations[currentLanguage].targetKpiNotAvailable}\nDeadline: ${deadline}`;
                            copyTextToClipboard(textToCopy, e.currentTarget);
                        };
                        smartGoalOutput.appendChild(goalItem);

                        // Suggested Subtasks
                        if (shouldGenerateSubtasks && content.subtasks && content.subtasks.length > 0) {
                            const subtasksItem = document.createElement('div');
                            subtasksItem.className = 'output-item';
                            const subtasksList = content.subtasks.map(task => `<li>${task}</li>`).join('');
                            subtasksItem.innerHTML = `
                                <h4 data-i18n="suggestedSubtasks">Suggested Subtasks for Draft ${index + 1}:</h4>
                                <ul class="list-disc pl-5">
                                    ${subtasksList}
                                </ul>
                                <button class="copy-button">${copyIcon} <span data-i18n="copyToClipboard">${translations[currentLanguage].copyToClipboard}</span></button>
                            `;
                            subtasksItem.querySelector('.copy-button').onclick = (e) => {
                                e.preventDefault();
                                const textToCopy = content.subtasks.map((task, idx) => `${idx + 1}. ${task}`).join('\n');
                                copyTextToClipboard(textToCopy, e.currentTarget);
                            };
                            smartGoalOutput.appendChild(subtasksItem);
                        }

                        // Suggested Success Criteria
                        if (shouldSuggestSuccessCriteria && content.suggestedSuccessCriteria && content.suggestedSuccessCriteria.length > 0) {
                            const successCriteriaItem = document.createElement('div');
                            successCriteriaItem.className = 'output-item';
                            const criteriaList = content.suggestedSuccessCriteria.map(criteria => `<li>${criteria}</li>`).join('');
                            successCriteriaItem.innerHTML = `
                                <h4 data-i18n="suggestedSuccessCriteria">Suggested Success Criteria for Draft ${index + 1}:</h4>
                                <ul class="list-disc pl-5">
                                    ${criteriaList}
                                </ul>
                                <button class="copy-button">${copyIcon} <span data-i18n="copyToClipboard">${translations[currentLanguage].copyToClipboard}</span></button>
                            `;
                            successCriteriaItem.querySelector('.copy-button').onclick = (e) => {
                                e.preventDefault();
                                const textToCopy = content.suggestedSuccessCriteria.map((criteria, idx) => `${idx + 1}. ${criteria}`).join('\n');
                                copyTextToClipboard(textToCopy, e.currentTarget);
                            };
                            smartGoalOutput.appendChild(successCriteriaItem);
                        }
                    });


                    smartGoalOutput.classList.remove('hidden');
                    applyTranslations(); // Apply translations to newly added elements
                } else {
                    displayMessage(translations[currentLanguage].failedToGenerateGoals, 'error', moduleSection);
                }
            };
        }


        /**
         * Renders the Performance Appraisal Feedback module.
         */
        function renderPerformanceAppraisal() {
            const appContent = document.getElementById('app-content');
            appContent.innerHTML = `
                <section class="module-section">
                    <h3 class="text-2xl font-bold mb-6 text-center text-linkedin-blue-dark" data-i18n="appraisalFeedback">Performance Appraisal Feedback</h3>
                    <div class="input-group">
                        <label for="performanceTier" data-i18n="selectPerformanceTier">Select Performance Tier</label>
                        <select id="performanceTier" class="rounded-md">
                            <option value="" data-i18n="selectAnOption">${translations[currentLanguage].selectAnOption}</option>
                            <option value="poorPerformance" data-i18n="poorPerformance">${translations[currentLanguage].poorPerformance}</option>
                            <option value="belowExpectations" data-i18n="belowExpectations">${translations[currentLanguage].belowExpectations}</option>
                            <option value="meetExpectations" data-i18n="meetExpectations">${translations[currentLanguage].meetExpectations}</option>
                            <option value="exceedExpectations" data-i18n="exceedExpectations">${translations[currentLanguage].exceedExpectations}</option>
                            <option value="outstanding" data-i18n="outstanding">${translations[currentLanguage].outstanding}</option>
                        </select>
                    </div>

                    <div id="tierSpecificInputs">
                        <!-- Inputs will be dynamically loaded here based on selection -->
                    </div>

                    <button id="generateAppraisalBtn" class="button-generate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg>
                        <span data-i18n="generateFeedback">Generate Feedback</span>
                    </button>
                    <div id="appraisalOutput" class="output-area hidden">
                        <h3 class="mb-4" data-i18n="generatedFeedback">Generated Feedback:</h3>
                    </div>
                </section>
            `;
            applyTranslations();

            const performanceTierSelect = document.getElementById('performanceTier');
            const tierSpecificInputs = document.getElementById('tierSpecificInputs');
            const generateAppraisalBtn = document.getElementById('generateAppraisalBtn');
            const appraisalOutput = document.getElementById('appraisalOutput');
            const moduleSection = appContent.querySelector('.module-section');


            /**
             * Renders input fields specific to the selected performance tier.
             * @param {string} tier The selected performance tier.
             */
            function renderTierInputs(tier) {
                tierSpecificInputs.innerHTML = '';
                let inputsHtml = '';

                switch (tier) {
                    case 'poorPerformance':
                        inputsHtml = `
                            <h4 class="text-xl font-semibold mb-4 text-linkedin-blue-dark" data-i18n="inputsFor">${translations[currentLanguage].inputsFor} ${translations[currentLanguage].poorPerformance}</h4>
                            <div class="input-group">
                                <label for="employeeDidntAchieveGoals" data-i18n="employeeDidntAchieveGoals">Confirmation that the employee didn’t achieve all goals</label>
                                <textarea id="employeeDidntAchieveGoals" rows="2" class="rounded-md" placeholder="${translations[currentLanguage].placeholderEmployeeDidntAchieveGoals}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="documentedExamples" data-i18n="documentedExamples">Documented examples of behaviors or outcomes that led to this evaluation</label>
                                <textarea id="documentedExamples" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderDocumentedExamples}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="managerSupportExamples" data-i18n="managerSupportExamples">Examples of support provided by the manager to enhance performance</label>
                                <textarea id="managerSupportExamples" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderManagerSupportExamples}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="strengthsWeaknessesAnalysis" data-i18n="strengthsWeaknessesAnalysis">Strengths and weaknesses analysis</label>
                                <textarea id="strengthsWeaknessesAnalysis" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderStrengthsWeaknessesAnalysis}"></textarea>
                            </div>
                        `;
                        break;
                    case 'belowExpectations':
                        inputsHtml = `
                            <h4 class="text-xl font-semibold mb-4 text-linkedin-blue-dark" data-i18n="inputsFor">${translations[currentLanguage].inputsFor} ${translations[currentLanguage].belowExpectations}</h4>
                            <div class="input-group">
                                <label for="projectsGoalsUnmet" data-i18n="projectsGoalsUnmet">Projects/goals/initiatives where expectations were not met</label>
                                <textarea id="projectsGoalsUnmet" rows="2" class="rounded-md" placeholder="${translations[currentLanguage].placeholderProjectsGoalsUnmet}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="documentedBehaviorResults" data-i18n="documentedBehaviorResults">Documented behavior/result examples that didn’t meet expectations</label>
                                <textarea id="documentedBehaviorResults" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderDocumentedBehaviorResults}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="managerSupportToImprove" data-i18n="managerSupportToImprove">Manager support examples to improve behavior</label>
                                <textarea id="managerSupportToImprove" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderManagerSupportToImprove}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="proposedTrainingPlan" data-i18n="proposedTrainingPlan">Proposed individual training plan</label>
                                <textarea id="proposedTrainingPlan" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderProposedTrainingPlan}"></textarea>
                            </div>
                        `;
                        break;
                    case 'meetExpectations':
                        inputsHtml = `
                            <h4 class="text-xl font-semibold mb-4 text-linkedin-blue-dark" data-i18n="inputsFor">${translations[currentLanguage].inputsFor} ${translations[currentLanguage].meetExpectations}</h4>
                            <div class="input-group">
                                <label for="accomplishedResponsibilities" data-i18n="accomplishedResponsibilities">Accomplished Responsibilities</label>
                                <textarea id="accomplishedResponsibilities" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderAccomplishedResponsibilities}"></textarea>
                            </div>
                        `;
                        break;
                    case 'exceedExpectations':
                        inputsHtml = `
                            <h4 class="text-xl font-semibold mb-4 text-linkedin-blue-dark" data-i18n="inputsFor">${translations[currentLanguage].inputsFor} ${translations[currentLanguage].exceedExpectations}</h4>
                            <div class="input-group">
                                <label for="exceededTheTarget" data-i18n="exceededTheTarget">Exceeded the target (Optional)</label>
                                <textarea id="exceededTheTarget" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderTargetSurpassMetrics}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="additionalResponsibilities" data-i18n="additionalResponsibilities">Additional Responsibilities (Optional)</label>
                                <textarea id="additionalResponsibilities" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderAdditionalAchievements}"></textarea>
                            </div>
                            <div class="input-group" id="justificationAdditionalResponsibilitiesGroup" style="display: none;">
                                <label for="justificationAdditionalResponsibilities" data-i18n="justificationAdditionalResponsibilities">Justification for “additional” Responsibilities</label>
                                <textarea id="justificationAdditionalResponsibilities" rows="2" class="rounded-md" placeholder="${translations[currentLanguage].placeholderJustificationAdditional}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="impactResponsibilitiesAchievements" data-i18n="impactResponsibilitiesAchievements">Impact of these Responsibilities / achievements</label>
                                <textarea id="impactResponsibilitiesAchievements" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderAchievementsImpact}"></textarea>
                            </div>
                        `;
                        break;
                    case 'outstanding':
                        inputsHtml = `
                            <h4 class="text-xl font-semibold mb-4 text-linkedin-blue-dark" data-i18n="inputsFor">${translations[currentLanguage].inputsFor} ${translations[currentLanguage].outstanding}</h4>
                            <div class="input-group">
                                <label for="outstandingSubOption" data-i18n="outstandingSubOption">Outstanding Sub-option</label>
                                <select id="outstandingSubOption" class="rounded-md">
                                    <option value="" data-i18n="selectAnOption">${translations[currentLanguage].selectAnOption}</option>
                                    <option value="workedInRiskAreas" data-i18n="workedInRiskAreas">${translations[currentLanguage].workedInRiskAreas}</option>
                                    <option value="createdInnovation" data-i18n="createdInnovation">${translations[currentLanguage].createdInnovation}</option>
                                    <option value="exceededTarget" data-i18n="exceededTarget">${translations[currentLanguage].exceededTarget}</option>
                                </select>
                            </div>
                            <div id="outstandingSpecificInputs">
                                <!-- Sub-options inputs will be loaded here -->
                            </div>
                        `;
                        break;
                    default:
                        break;
                }
                tierSpecificInputs.innerHTML = inputsHtml;
                applyTranslations(); // Apply translations to newly rendered inputs

                // Logic for showing/hiding justification field for Exceed Expectations
                if (tier === 'exceedExpectations') {
                    const additionalResponsibilitiesInput = document.getElementById('additionalResponsibilities');
                    const justificationAdditionalResponsibilitiesGroup = document.getElementById('justificationAdditionalResponsibilitiesGroup');
                    if (additionalResponsibilitiesInput && justificationAdditionalResponsibilitiesGroup) {
                        additionalResponsibilitiesInput.oninput = () => {
                            if (additionalResponsibilitiesInput.value.trim() !== '') {
                                justificationAdditionalResponsibilitiesGroup.style.display = 'block';
                            } else {
                                justificationAdditionalResponsibilitiesGroup.style.display = 'none';
                            }
                        };
                        // Initial check in case there's pre-filled content (e.g., from a back action)
                        if (additionalResponsibilitiesInput.value.trim() !== '') {
                            justificationAdditionalResponsibilitiesGroup.style.display = 'block';
                        } else {
                            justificationAdditionalResponsibilitiesGroup.style.display = 'none';
                        }
                    }
                }

                if (tier === 'outstanding') {
                    const outstandingSubOptionSelect = document.getElementById('outstandingSubOption');
                    const outstandingSpecificInputs = document.getElementById('outstandingSpecificInputs');
                    outstandingSubOptionSelect.onchange = () => {
                        renderOutstandingSubInputs(outstandingSubOptionSelect.value);
                    };
                    // Initial render for outstanding sub-options if a value is pre-selected
                    renderOutstandingSubInputs(outstandingSubOptionSelect.value);
                }
            }

            /**
             * Renders input fields specific to the selected outstanding sub-option.
             * @param {string} subOption The selected outstanding sub-option.
             */
            function renderOutstandingSubInputs(subOption) {
                const outstandingSpecificInputs = document.getElementById('outstandingSpecificInputs');
                outstandingSpecificInputs.innerHTML = '';
                let subInputsHtml = '';
                switch (subOption) {
                    case 'workedInRiskAreas':
                        subInputsHtml = `
                            <div class="input-group">
                                <label for="missionDetails" data-i18n="missionDetails">Mission Details (location, time, risk context)</label>
                                <textarea id="missionDetails" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderMissionDetails}"></textarea>
                            </div>
                        `;
                        break;
                    case 'createdInnovation':
                        subInputsHtml = `
                            <div class="input-group">
                                <label for="solutionDescription" data-i18n="solutionDescription">Solution description</label>
                                <textarea id="solutionDescription" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderSolutionDescription}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="businessImpactMetrics" data-i18n="businessImpactMetrics">Business impact metrics</label>
                                <textarea id="businessImpactMetrics" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderBusinessImpactMetrics}"></textarea>
                            </div>
                        `;
                        break;
                    case 'exceededTarget':
                        subInputsHtml = `
                            <div class="input-group">
                                <label for="targetSurpassMetrics" data-i18n="targetSurpassMetrics">Target surpass metrics (quantitative)</label>
                                <textarea id="targetSurpassMetrics" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderTargetSurpassMetrics}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="impactExceededTarget" data-i18n="impactExceededTarget">Impact</label>
                                <textarea id="impactExceededTarget" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderImpactExceededTarget}"></textarea>
                            </div>
                        `;
                        break;
                    default:
                        break;
                }
                outstandingSpecificInputs.innerHTML = subInputsHtml;
                applyTranslations(); // Apply translations to newly rendered sub-inputs
            }

            performanceTierSelect.onchange = () => {
                renderTierInputs(performanceTierSelect.value);
                appraisalOutput.classList.add('hidden'); // Hide output when tier changes
            };

            generateAppraisalBtn.onclick = async () => {
                const tier = performanceTierSelect.value;
                if (!tier) {
                    displayMessage(translations[currentLanguage].fillAppraisalMandatoryFields, 'error', moduleSection);
                    return;
                }

                let prompt = `As an HR assistant, draft a performance appraisal feedback for an employee based on the "${tier}" performance tier. Use the following details, formatted for ${currentLanguage}:\n\n`;
                let allFieldsFilled = true;
                const data = {};

                // Collect data and check for mandatory fields based on the tier
                switch (tier) {
                    case 'poorPerformance':
                        data.employeeDidntAchieveGoals = document.getElementById('employeeDidntAchieveGoals')?.value.trim();
                        data.documentedExamples = document.getElementById('documentedExamples')?.value.trim();
                        data.managerSupportExamples = document.getElementById('managerSupportExamples')?.value.trim();
                        data.strengthsWeaknessesAnalysis = document.getElementById('strengthsWeaknessesAnalysis')?.value.trim();
                        if (!data.employeeDidntAchieveGoals || !data.documentedExamples || !data.managerSupportExamples || !data.strengthsWeaknessesAnalysis) {
                            allFieldsFilled = false;
                        }
                        prompt += `Performance Tier: Poor Performance\n`;
                        prompt += `Confirmation employee didn't achieve all goals: ${data.employeeDidntAchieveGoals}\n`;
                        prompt += `Documented examples of behaviors/outcomes: ${data.documentedExamples}\n`;
                        prompt += `Manager support examples: ${data.managerSupportExamples}\n`;
                        prompt += `Strengths and weaknesses analysis: ${data.strengthsWeaknessesAnalysis}\n`;
                        break;
                    case 'belowExpectations':
                        data.projectsGoalsUnmet = document.getElementById('projectsGoalsUnmet')?.value.trim();
                        data.documentedBehaviorResults = document.getElementById('documentedBehaviorResults')?.value.trim();
                        data.managerSupportToImprove = document.getElementById('managerSupportToImprove')?.value.trim();
                        data.proposedTrainingPlan = document.getElementById('proposedTrainingPlan')?.value.trim();
                        if (!data.projectsGoalsUnmet || !data.documentedBehaviorResults || !data.managerSupportToImprove || !data.proposedTrainingPlan) {
                            allFieldsFilled = false;
                        }
                        prompt += `Performance Tier: Below Expectations\n`;
                        prompt += `Projects/goals/initiatives where expectations were not met: ${data.projectsGoalsUnmet}\n`;
                        prompt += `Documented behavior/result examples that didn’t meet expectations: ${data.documentedBehaviorResults}\n`;
                        prompt += `Manager support examples to improve behavior: ${data.managerSupportToImprove}\n`;
                        prompt += `Proposed individual training plan: ${data.proposedTrainingPlan}\n`;
                        break;
                    case 'meetExpectations':
                        data.accomplishedResponsibilities = document.getElementById('accomplishedResponsibilities')?.value.trim();
                        
                        if (!data.accomplishedResponsibilities) {
                            allFieldsFilled = false;
                        }
                        prompt += `Performance Tier: Meet Expectations\n`;
                        prompt += `Accomplished Responsibilities: ${data.accomplishedResponsibilities}\n`;
                        break;
                    case 'exceedExpectations':
                        data.exceededTheTarget = document.getElementById('exceededTheTarget')?.value.trim(); // Optional
                        data.additionalResponsibilities = document.getElementById('additionalResponsibilities')?.value.trim(); // Optional
                        data.justificationAdditionalResponsibilities = document.getElementById('justificationAdditionalResponsibilities')?.value.trim(); // Optional, depends on additionalResponsibilities
                        data.impactResponsibilitiesAchievements = document.getElementById('impactResponsibilitiesAchievements')?.value.trim(); // Mandatory
                        
                        // Check if mandatory fields are filled.
                        // For 'exceedExpectations', 'impactResponsibilitiesAchievements' is mandatory.
                        // 'justificationAdditionalResponsibilities' is mandatory if 'additionalResponsibilities' is provided.
                        if (!data.impactResponsibilitiesAchievements || (data.additionalResponsibilities && !data.justificationAdditionalResponsibilities)) {
                            allFieldsFilled = false;
                        }

                        prompt += `Performance Tier: Exceed Expectations\n`;
                        if (data.exceededTheTarget) { // Only add if provided
                            prompt += `Exceeded the target: ${data.exceededTheTarget}\n`;
                        }
                        if (data.additionalResponsibilities) {
                            prompt += `Additional Responsibilities: ${data.additionalResponsibilities}\n`;
                            // Only add justification to prompt if additional responsibilities are provided
                            if (data.justificationAdditionalResponsibilities) {
                                prompt += `Justification for “additional” Responsibilities: ${data.justificationAdditionalResponsibilities}\n`;
                            }
                        }
                        prompt += `Impact of these Responsibilities / achievements: ${data.impactResponsibilitiesAchievements}\n`;
                        break;
                    case 'outstanding':
                        const subOption = document.getElementById('outstandingSubOption')?.value;
                        if (!subOption) {
                             allFieldsFilled = false;
                        }
                        prompt += `Performance Tier: Outstanding\n`;
                        prompt += `Outstanding Sub-option: ${translations[currentLanguage][subOption]}\n`;

                        switch (subOption) {
                            case 'workedInRiskAreas':
                                data.missionDetails = document.getElementById('missionDetails')?.value.trim();
                                if (!data.missionDetails) allFieldsFilled = false;
                                prompt += `Mission Details: ${data.missionDetails}\n`;
                                break;
                            case 'createdInnovation':
                                data.solutionDescription = document.getElementById('solutionDescription')?.value.trim();
                                data.businessImpactMetrics = document.getElementById('businessImpactMetrics')?.value.trim();
                                if (!data.solutionDescription || !data.businessImpactMetrics) allFieldsFilled = false;
                                prompt += `Solution Description: ${data.solutionDescription}\n`;
                                prompt += `Business Impact Metrics: ${data.businessImpactMetrics}\n`;
                                break;
                            case 'exceededTarget':
                                data.targetSurpassMetrics = document.getElementById('targetSurpassMetrics')?.value.trim();
                                data.impactExceededTarget = document.getElementById('impactExceededTarget')?.value.trim();
                                if (!data.targetSurpassMetrics || !data.impactExceededTarget) allFieldsFilled = false;
                                prompt += `Target Surpass Metrics: ${data.targetSurpassMetrics}\n`;
                                prompt += `Impact of Exceeding Target: ${data.impactExceededTarget}\n`;
                                break;
                        }
                        break;
                }

                if (!allFieldsFilled) {
                    displayMessage(translations[currentLanguage].fillAppraisalMandatoryFields, 'error', moduleSection);
                    return;
                }

                generateAppraisalBtn.disabled = true;
                generateAppraisalBtn.innerHTML = `${loaderIcon} ${translations[currentLanguage].generateFeedback}`;
                appraisalOutput.classList.add('hidden');

                let generatedFeedback;
                try {
                    generatedFeedback = await callGeminiApi(prompt);
                } catch (error) {
                    console.error("Error during API call for Appraisal Feedback:", error);
                    displayMessage(`${translations[currentLanguage].failedToGenerate} ${error.message}`, 'error', moduleSection);
                    generateAppraisalBtn.disabled = false;
                    generateAppraisalBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateFeedback">${translations[currentLanguage].generateFeedback}</span>`;
                    return;
                }

                generateAppraisalBtn.disabled = false;
                generateAppraisalBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateFeedback">${translations[currentLanguage].generateFeedback}</span>`;


                if (generatedFeedback) {
                    appraisalOutput.innerHTML = `<h3 class="mb-4" data-i18n="generatedFeedback">Generated Feedback:</h3>`;
                    const feedbackItem = document.createElement('div');
                    feedbackItem.className = 'output-item';
                    feedbackItem.innerHTML = `
                        <p>${generatedFeedback}</p>
                        <button class="copy-button">${copyIcon} <span data-i18n="copyToClipboard">${translations[currentLanguage].copyToClipboard}</span></button>
                    `;
                    feedbackItem.querySelector('.copy-button').onclick = (e) => {
                        e.preventDefault();
                        copyTextToClipboard(generatedFeedback, e.currentTarget);
                    };
                    appraisalOutput.appendChild(feedbackItem);
                    appraisalOutput.classList.remove('hidden');
                    applyTranslations();
                } else {
                    displayMessage(translations[currentLanguage].failedToGenerate + ' appraisal feedback.', 'error', moduleSection);
                }
            };

            // Initial render of inputs based on default selection (or empty if none)
            renderTierInputs(performanceTierSelect.value);
        }

        /**
         * Renders the Performance Notes module.
         */
        function renderPerformanceNote() {
            const appContent = document.getElementById('app-content');
            appContent.innerHTML = `
                <section class="module-section">
                    <h3 class="text-2xl font-bold mb-6 text-center text-linkedin-blue-dark" data-i18n="performanceNotes">Performance Notes</h3>
                    <div class="input-group">
                        <label for="dateOfObservation" data-i18n="dateOfObservation">Date of Observation</label>
                        <input type="date" id="dateOfObservation" class="rounded-md">
                    </div>
                    <div class="input-group">
                        <label for="feedbackType" data-i18n="feedbackType">Feedback Type</label>
                        <select id="feedbackType" class="rounded-md">
                            <option value="" data-i18n="selectAnOption">${translations[currentLanguage].selectAnOption}</option>
                            <option value="recognition" data-i18n="recognition">${translations[currentLanguage].recognition}</option>
                            <option value="development" data-i18n="development">${translations[currentLanguage].development}</option>
                            <option value="general" data-i18n="general">${translations[currentLanguage].general}</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="observedBehaviorAction" data-i18n="observedBehaviorAction">Observed Behavior/Action</label>
                        <textarea id="observedBehaviorAction" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderObservedBehaviorAction}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="contextSituation" data-i18n="contextSituation">Context/Situation</label>
                        <textarea id="contextSituation" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderContextSituation}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="impactOutcome" data-i18n="impactOutcome">Impact/Outcome</label>
                        <textarea id="impactOutcome" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderImpactOutcome}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="sentimentIndicator" data-i18n="sentimentIndicator">Sentiment Indicator</label>
                        <select id="sentimentIndicator" class="rounded-md">
                            <option value="" data-i18n="selectAnOption">${translations[currentLanguage].selectAnOption}</option>
                            <option value="positive" data-i18n="positive">${translations[currentLanguage].positive}</option>
                            <option value="negative" data-i18n="negative">${translations[currentLanguage].negative}</option>
                            <option value="neutral" data-i18n="neutral">${translations[currentLanguage].neutral}</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="alignmentGoalsValues" data-i18n="alignmentGoalsValues">Alignment with Goals/Values (Optional)</label>
                        <textarea id="alignmentGoalsValues" rows="2" class="rounded-md" placeholder="${translations[currentLanguage].placeholderAlignmentGoalsValues}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="nextSteps" data-i18n="nextSteps">Next Steps (Optional)</label>
                        <textarea id="nextSteps" rows="2" class="rounded-md" placeholder="${translations[currentLanguage].placeholderNextSteps}"></textarea>
                    </div>
                    <button id="generatePerformanceNoteBtn" class="button-generate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg>
                        <span data-i18n="generatePerformanceNote">Generate Performance Note</span>
                    </button>
                    <div id="performanceNoteOutput" class="output-area hidden">
                        <h3 class="mb-4" data-i18n="generatedNote">Generated Note:</h3>
                    </div>
                </section>
            `;
            applyTranslations();

            const generateButton = document.getElementById('generatePerformanceNoteBtn');
            const performanceNoteOutput = document.getElementById('performanceNoteOutput');
            const dateOfObservationInput = document.getElementById('dateOfObservation');
            const feedbackTypeSelect = document.getElementById('feedbackType');
            const observedBehaviorActionInput = document.getElementById('observedBehaviorAction');
            const contextSituationInput = document.getElementById('contextSituation');
            const impactOutcomeInput = document.getElementById('impactOutcome');
            const sentimentIndicatorSelect = document.getElementById('sentimentIndicator');
            const alignmentGoalsValuesInput = document.getElementById('alignmentGoalsValues'); // This is now optional
            const nextStepsInput = document.getElementById('nextSteps');
            const moduleSection = appContent.querySelector('.module-section');


            generateButton.onclick = async () => {
                const dateOfObservation = dateOfObservationInput.value.trim();
                const feedbackType = feedbackTypeSelect.value;
                const observedBehaviorAction = observedBehaviorActionInput.value.trim();
                const contextSituation = contextSituationInput.value.trim();
                const impactOutcome = impactOutcomeInput.value.trim();
                const sentimentIndicator = sentimentIndicatorSelect.value;
                const alignmentGoalsValues = alignmentGoalsValuesInput.value.trim();
                const nextSteps = nextStepsInput.value.trim();

                // Removed alignmentGoalsValues from mandatory check
                if (!dateOfObservation || !feedbackType || !observedBehaviorAction || !contextSituation || !impactOutcome || !sentimentIndicator) {
                    displayMessage(translations[currentLanguage].fillNoteMandatoryFields, 'error', moduleSection);
                    return;
                }

                generateButton.disabled = true;
                generateButton.innerHTML = `${loaderIcon} ${translations[currentLanguage].generatePerformanceNote}`;
                performanceNoteOutput.classList.add('hidden');

                let prompt = `As an HR assistant, draft a performance note based on the following details, considering the user's language preference (${currentLanguage}):\n\n`;
                prompt += `Date of Observation: ${dateOfObservation}\n`;
                prompt += `Feedback Type: ${feedbackType}\n`;
                prompt += `Observed Behavior/Action: ${observedBehaviorAction}\n`;
                prompt += `Context/Situation: ${contextSituation}\n`;
                prompt += `Impact/Outcome: ${impactOutcome}\n`;
                prompt += `Sentiment Indicator: ${sentimentIndicator}\n`;
                if (alignmentGoalsValues) { // Still include if provided
                    prompt += `Alignment with Goals/Values: ${alignmentGoalsValues}\n`;
                }
                if (nextSteps) {
                    prompt += `Next Steps: ${nextSteps}\n`;
                }
                prompt += `The note should be concise and professional.`;

                let generatedNote;
                try {
                    generatedNote = await callGeminiApi(prompt);
                } catch (error) {
                    console.error("Error during API call for Performance Note:", error);
                    displayMessage(`${translations[currentLanguage].failedToGenerate} ${error.message}`, 'error', moduleSection);
                    generateButton.disabled = false;
                    generateButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generatePerformanceNote">${translations[currentLanguage].generatePerformanceNote}</span>`;
                    return;
                }

                generateButton.disabled = false;
                generateButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generatePerformanceNote">${translations[currentLanguage].generatePerformanceNote}</span>`;


                if (generatedNote) {
                    performanceNoteOutput.innerHTML = `<h3 class="mb-4" data-i18n="generatedNote">Generated Note:</h3>`;
                    const noteItem = document.createElement('div');
                    noteItem.className = 'output-item';
                    noteItem.innerHTML = `
                        <p>${generatedNote}</p>
                        <button class="copy-button">${copyIcon} <span data-i18n="copyToClipboard">${translations[currentLanguage].copyToClipboard}</span></button>
                    `;
                    noteItem.querySelector('.copy-button').onclick = (e) => {
                        e.preventDefault();
                        copyTextToClipboard(generatedNote, e.currentTarget);
                    };
                    performanceNoteOutput.appendChild(noteItem);
                    performanceNoteOutput.classList.remove('hidden');
                    applyTranslations();
                } else {
                    displayMessage(translations[currentLanguage].failedToGenerate + ' performance note.', 'error', moduleSection);
                }
            };
        }

        /**
         * Renders the Individual Development Plan (IDP) module.
         */
        function renderIdp() {
            const appContent = document.getElementById('app-content');
            appContent.innerHTML = `
                <section class="module-section">
                    <h3 class="text-2xl font-bold mb-6 text-center text-linkedin-blue-dark" data-i18n="idp">Individual Development Plan</h3>
                    <div class="input-group">
                        <label for="employeeCurrentRole" data-i18n="employeeCurrentRole">Employee's Current Role</label>
                        <input type="text" id="employeeCurrentRole" class="rounded-md" placeholder="${translations[currentLanguage].employeeCurrentRole}">
                    </div>
                    <div class="input-group">
                        <label for="currentSkillsStrengths" data-i18n="currentSkillsStrengths">Current Skills and Strengths</label>
                        <textarea id="currentSkillsStrengths" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].currentSkillsStrengths}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="desiredSkillsDevelopment" data-i18n="desiredSkillsDevelopment">Desired Skills/Areas for Development</label>
                        <textarea id="desiredSkillsDevelopment" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].desiredSkillsDevelopment}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="careerAspirations" data-i18n="careerAspirations">Career Aspirations</label>
                        <textarea id="careerAspirations" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].careerAspirations}"></textarea>
                    </div>

                    <h4 class="text-xl font-semibold mb-4 text-linkedin-blue-dark" data-i18n="developmentTarget">Development Targets</h4>
                    <div id="developmentTargetsContainer">
                        <!-- Dynamic development target blocks will be added here -->
                    </div>
                    <button id="addDevelopmentTargetBtn" class="button-generate mt-4 mb-6 !w-auto">
                        ${addIcon} <span data-i18n="addDevelopmentTarget">Add Development Target</span>
                    </button>

                    <button id="generateIdpBtn" class="button-generate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg>
                        <span data-i18n="generateIdp">Generate IDP</span>
                    </button>
                    <div id="idpOutput" class="output-area hidden">
                        <h3 class="mb-4" data-i18n="generatedIdpDraft">Generated IDP Draft:</h3>
                    </div>
                </section>
            `;
            applyTranslations();

            const addDevelopmentTargetBtn = document.getElementById('addDevelopmentTargetBtn');
            const developmentTargetsContainer = document.getElementById('developmentTargetsContainer');
            const generateIdpBtn = document.getElementById('generateIdpBtn');
            const idpOutput = document.getElementById('idpOutput');
            const employeeCurrentRoleInput = document.getElementById('employeeCurrentRole');
            const currentSkillsStrengthsInput = document.getElementById('currentSkillsStrengths');
            const desiredSkillsDevelopmentInput = document.getElementById('desiredSkillsDevelopment');
            const careerAspirationsInput = document.getElementById('careerAspirations');
            const moduleSection = appContent.querySelector('.module-section');

            let targetCounter = 0;

            /**
             * Adds a new development target block with its own activities and support resources.
             */
            function addDevelopmentTargetBlock() {
                targetCounter++;
                const targetBlock = document.createElement('div');
                targetBlock.className = 'development-target-block';
                targetBlock.setAttribute('data-target-id', targetCounter); // Unique ID for this block
                targetBlock.innerHTML = `
                    <button class="remove-block-btn" title="${translations[currentLanguage].removeTarget}">
                        ${removeIcon}
                    </button>
                    <h4 class="text-lg font-semibold mb-4">${translations[currentLanguage].developmentTarget} ${targetCounter}</h4>
                    <div class="input-group">
                        <label for="developmentTarget-${targetCounter}" data-i18n="developmentTarget">Development Target Skill/Competency/Goal</label>
                        <input type="text" id="developmentTarget-${targetCounter}" class="rounded-md development-target-input" placeholder="${translations[currentLanguage].placeholderDevelopmentTarget}">
                    </div>

                    <h5 class="text-md font-semibold mt-6 mb-3 text-linkedin-blue-dark" data-i18n="developmentActivities">Development Activities</h5>
                    <div id="developmentActivitiesContainer-${targetCounter}">
                        <!-- Dynamic activity inputs for this target will be added here -->
                    </div>
                    <button class="add-button add-activity-btn" data-target-id="${targetCounter}">
                        ${addIcon} <span data-i18n="addActivity">Add Activity</span>
                    </button>

                    <h5 class="text-md font-semibold mt-6 mb-3 text-linkedin-blue-dark" data-i18n="supportResources">Support & Resources</h5>
                    <div id="supportResourcesContainer-${targetCounter}">
                        <div class="support-group">
                            <div class="input-group">
                                <label for="managerOrgSupport-${targetCounter}" data-i18n="managerOrgSupport">Manager/Org Support Required</label>
                                <textarea id="managerOrgSupport-${targetCounter}" rows="2" class="rounded-md manager-org-support" placeholder="${translations[currentLanguage].placeholderManagerOrgSupport}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="budgetTimeEstimates-${targetCounter}" data-i18n="budgetTimeEstimates">Budget/Time Estimates</label>
                                <textarea id="budgetTimeEstimates-${targetCounter}" rows="2" class="rounded-md budget-time-estimates" placeholder="${translations[currentLanguage].placeholderBudgetTimeEstimates}"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="toolsSystemsNeeded-${targetCounter}" data-i18n="toolsSystemsNeeded">Tools/Systems Needed</label>
                                <textarea id="toolsSystemsNeeded-${targetCounter}" rows="2" class="rounded-md tools-systems-needed" placeholder="${translations[currentLanguage].placeholderToolsSystemsNeeded}"></textarea>
                            </div>
                        </div>
                    </div>
                `;
                developmentTargetsContainer.appendChild(targetBlock);
                applyTranslations(); // Apply translations to newly added elements

                // Attach event listener for removing the entire target block
                targetBlock.querySelector('.remove-block-btn').onclick = () => {
                    targetBlock.remove();
                    // Re-index target block titles if needed (optional, but good for UX)
                    document.querySelectorAll('.development-target-block h4').forEach((h4, idx) => {
                        h4.textContent = `${translations[currentLanguage].developmentTarget} ${idx + 1}`;
                    });
                };

                // Attach event listener for adding activities within this target block
                targetBlock.querySelector('.add-activity-btn').onclick = (e) => {
                    const currentTargetId = e.currentTarget.getAttribute('data-target-id');
                    addDevelopmentActivity(currentTargetId);
                };

                // Add an initial activity for the new target block
                addDevelopmentActivity(targetCounter);
            }

            let activitySubCounter = 0; // Global counter for unique activity IDs

            /**
             * Adds a new development activity input group within a specific target block.
             * @param {number} targetId The ID of the parent development target block.
             */
            function addDevelopmentActivity(targetId) {
                activitySubCounter++;
                const activitiesContainer = document.getElementById(`developmentActivitiesContainer-${targetId}`);
                if (!activitiesContainer) return;

                const activityDiv = document.createElement('div');
                activityDiv.className = 'activity-group border border-linkedin-gray-100 p-4 rounded-md mb-4 relative';
                activityDiv.innerHTML = `
                    <button class="remove-activity-btn absolute top-2 right-2 text-linkedin-red hover:text-linkedin-blue-dark" title="Remove Activity">
                        ${removeIcon}
                    </button>
                    <div class="input-group">
                        <label for="activityType-${targetId}-${activitySubCounter}" data-i18n="activityTypeLabel">Activity Type</label>
                        <select id="activityType-${targetId}-${activitySubCounter}" class="rounded-md activity-type">
                            <option value="" data-i18n="selectAnOption">${translations[currentLanguage].selectAnOption}</option>
                            <option value="trainingCourses" data-i18n="trainingCourses">${translations[currentLanguage].trainingCourses}</option>
                            <option value="workshopsCertifications" data-i18n="workshopsCertifications">${translations[currentLanguage].workshopsCertifications}</option>
                            <option value="jobShadowingMentoring" data-i18n="jobShadowingMentoring">${translations[currentLanguage].jobShadowingMentoring}</option>
                            <option value="stretchAssignments" data-i18n="stretchAssignments">${translations[currentLanguage].stretchAssignments}</option>
                            <option value="researchTopics" data-i18n="researchTopics">${translations[currentLanguage].researchTopics}</option>
                            <option value="networking" data-i18n="networking">${translations[currentLanguage].networking}</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="activityDescription-${targetId}-${activitySubCounter}" data-i18n="detailedDescription">Detailed Description</label>
                        <textarea id="activityDescription-${targetId}-${activitySubCounter}" rows="2" class="rounded-md activity-description" placeholder="${translations[currentLanguage].placeholderActivityDescription}"></textarea>
                    </div>
                `;
                activitiesContainer.appendChild(activityDiv);
                applyTranslations();

                // Add event listener for remove button
                activityDiv.querySelector('.remove-activity-btn').onclick = () => {
                    activityDiv.remove();
                };
            }

            // Add first development target block automatically on load
            addDevelopmentTargetBlock();

            addDevelopmentTargetBtn.onclick = addDevelopmentTargetBlock;

            generateIdpBtn.onclick = async () => {
                const employeeCurrentRole = employeeCurrentRoleInput.value.trim();
                const currentSkillsStrengths = currentSkillsStrengthsInput.value.trim();
                const desiredSkillsDevelopment = desiredSkillsDevelopmentInput.value.trim();
                const careerAspirations = careerAspirationsInput.value.trim();

                if (!employeeCurrentRole || !currentSkillsStrengths || !desiredSkillsDevelopment || !careerAspirations) {
                    displayMessage(translations[currentLanguage].fillIdpMandatoryFields, 'error', moduleSection);
                    return;
                }

                const developmentTargets = [];
                let allTargetsFilled = true;

                document.querySelectorAll('.development-target-block').forEach(targetBlock => {
                    const targetId = targetBlock.getAttribute('data-target-id');
                    const developmentTarget = targetBlock.querySelector(`#developmentTarget-${targetId}`)?.value.trim();
                    const managerOrgSupport = targetBlock.querySelector(`#managerOrgSupport-${targetId}`)?.value.trim();
                    const budgetTimeEstimates = targetBlock.querySelector(`#budgetTimeEstimates-${targetId}`)?.value.trim();
                    const toolsSystemsNeeded = targetBlock.querySelector(`#toolsSystemsNeeded-${targetId}`)?.value.trim();

                    const activities = [];
                    targetBlock.querySelectorAll(`#developmentActivitiesContainer-${targetId} .activity-group`).forEach(activityDiv => {
                        const type = activityDiv.querySelector('.activity-type')?.value;
                        const description = activityDiv.querySelector('.activity-description')?.value.trim();
                        if (type && description) {
                            activities.push({ type: translations[currentLanguage][type], description });
                        } else {
                            allTargetsFilled = false; // An activity within a target is not fully filled
                        }
                    });

                    if (!developmentTarget || activities.length === 0 || !managerOrgSupport || !budgetTimeEstimates || !toolsSystemsNeeded) {
                        allTargetsFilled = false; // A target block itself is not fully filled
                    }

                    developmentTargets.push({
                        developmentTarget,
                        activities,
                        managerOrgSupport,
                        budgetTimeEstimates,
                        toolsSystemsNeeded
                    });
                });

                if (!allTargetsFilled || developmentTargets.length === 0) {
                    displayMessage(translations[currentLanguage].fillIdpMandatoryFields, 'error', moduleSection);
                    return;
                }

                generateIdpBtn.disabled = true;
                generateIdpBtn.innerHTML = `${loaderIcon} ${translations[currentLanguage].generateIdp}`;
                idpOutput.classList.add('hidden');

                let prompt = `As an HR assistant, draft an Individual Development Plan (IDP) based on the following details, formatted for ${currentLanguage}:\n\n`;
                prompt += `Employee's Current Role: ${employeeCurrentRole}\n`;
                prompt += `Current Skills and Strengths: ${currentSkillsStrengths}\n`;
                prompt += `Desired Skills/Areas for Development: ${desiredSkillsDevelopment}\n`;
                prompt += `Career Aspirations: ${careerAspirations}\n\n`;

                developmentTargets.forEach((target, index) => {
                    prompt += `--- Development Target ${index + 1} ---\n`;
                    prompt += `Development Target Skill/Competency/Goal: ${target.developmentTarget}\n\n`;
                    prompt += `Development Activities:\n`;
                    target.activities.forEach(activity => {
                        prompt += `- Type: ${activity.type}, Description: ${activity.description}\n`;
                    });
                    prompt += `\nSupport & Resources:\n`;
                    prompt += `Manager/Org Support Required: ${target.managerOrgSupport}\n`;
                    prompt += `Budget/Time Estimates: ${target.budgetTimeEstimates}\n`;
                    prompt += `Tools/Systems Needed: ${target.toolsSystemsNeeded}\n\n`;
                });

                prompt += `The IDP should be comprehensive and actionable.`;

                let generatedIdp;
                try {
                    generatedIdp = await callGeminiApi(prompt);
                } catch (error) {
                    console.error("Error during API call for IDP:", error);
                    displayMessage(`${translations[currentLanguage].failedToGenerate} ${error.message}`, 'error', moduleSection);
                    generateIdpBtn.disabled = false;
                    generateIdpBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateIdp">${translations[currentLanguage].generateIdp}</span>`;
                    return;
                }

                generateIdpBtn.disabled = false;
                generateIdpBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateIdp">${translations[currentLanguage].generateIdp}</span>`;


                if (generatedIdp) {
                    idpOutput.innerHTML = `<h3 class="mb-4" data-i18n="generatedIdpDraft">Generated IDP Draft:</h3>`;
                    const idpItem = document.createElement('div');
                    idpItem.className = 'output-item';
                    idpItem.innerHTML = `
                        <p>${generatedIdp}</p>
                        <button class="copy-button">${copyIcon} <span data-i18n="copyToClipboard">${translations[currentLanguage].copyToClipboard}</span></button>
                    `;
                    idpItem.querySelector('.copy-button').onclick = (e) => {
                        e.preventDefault();
                        copyTextToClipboard(generatedIdp, e.currentTarget);
                    };
                    idpOutput.appendChild(idpItem);
                    idpOutput.classList.remove('hidden');
                    applyTranslations();
                } else {
                    displayMessage(translations[currentLanguage].failedToGenerate + ' IDP.', 'error', moduleSection);
                }
            };
        }

        /**
         * Renders the Periodic Feedback (Regular Check-in) module.
         */
        function renderRegularCheckIn() {
            const appContent = document.getElementById('app-content');
            appContent.innerHTML = `
                <section class="module-section">
                    <h3 class="text-2xl font-bold mb-6 text-center text-linkedin-blue-dark" data-i18n="regularCheckInFeedback">Periodic Feedback</h3>
                    <div class="input-group">
                        <label for="dateOfCheckIn" data-i18n="dateOfCheckIn">Date of Check-in</label>
                        <input type="date" id="dateOfCheckIn" class="rounded-md">
                    </div>
                    <div class="input-group">
                        <label for="progressOnGoals" data-i18n="progressOnGoals">Progress on Goals/Projects</label>
                        <textarea id="progressOnGoals" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderProgressOnGoals}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="challenges" data-i18n="challenges">Challenges/Roadblocks (Optional)</label>
                        <textarea id="challenges" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderChallenges}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="accomplishments" data-i18n="accomplishments">Accomplishments/Highlights (Optional)</label>
                        <textarea id="accomplishments" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderAccomplishments}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="managerObservations" data-i18n="managerObservations">Manager Observations/Feedback (Optional)</label>
                        <textarea id="managerObservations" rows="3" class="rounded-md" placeholder="${translations[currentLanguage].placeholderManagerObservations}"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="nextStepsCheckIn" data-i18n="nextStepsCheckIn">Next Steps/Action Items (Optional)</label>
                        <textarea id="nextStepsCheckIn" rows="2" class="rounded-md" placeholder="${translations[currentLanguage].placeholderNextStepsCheckIn}"></textarea>
                    </div>
                    <button id="generateCheckInFeedbackBtn" class="button-generate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg>
                        <span data-i18n="generateCheckInFeedback">Generate Periodic Feedback</span>
                    </button>
                    <div id="checkInOutput" class="output-area hidden">
                        <h3 class="mb-4" data-i18n="generatedCheckInFeedback">Generated Periodic Feedback:</h3>
                    </div>
                </section>
            `;
            applyTranslations();

            const generateButton = document.getElementById('generateCheckInFeedbackBtn');
            const checkInOutput = document.getElementById('checkInOutput');
            const dateOfCheckInInput = document.getElementById('dateOfCheckIn');
            const progressOnGoalsInput = document.getElementById('progressOnGoals');
            const challengesInput = document.getElementById('challenges');
            const accomplishmentsInput = document.getElementById('accomplishments');
            const managerObservationsInput = document.getElementById('managerObservations');
            const nextStepsCheckInInput = document.getElementById('nextStepsCheckIn');
            const moduleSection = appContent.querySelector('.module-section');


            generateButton.onclick = async () => {
                const dateOfCheckIn = dateOfCheckInInput.value.trim();
                const progressOnGoals = progressOnGoalsInput.value.trim();
                const challenges = challengesInput.value.trim();
                const accomplishments = accomplishmentsInput.value.trim();
                const managerObservations = managerObservationsInput.value.trim();
                const nextStepsCheckIn = nextStepsCheckInInput.value.trim();

                if (!dateOfCheckIn || !progressOnGoals) {
                    displayMessage(translations[currentLanguage].fillCheckInMandatoryFields, 'error', moduleSection);
                    return;
                }

                generateButton.disabled = true;
                generateButton.innerHTML = `${loaderIcon} ${translations[currentLanguage].generateCheckInFeedback}`;
                checkInOutput.classList.add('hidden');

                let prompt = `As an HR assistant, draft a periodic feedback (regular check-in) summary based on the following details, formatted for ${currentLanguage}:\n\n`;
                prompt += `Date of Check-in: ${dateOfCheckIn}\n`;
                prompt += `Progress on Goals/Projects: ${progressOnGoals}\n`;
                if (challenges) {
                    prompt += `Challenges/Roadblocks: ${challenges}\n`;
                }
                if (accomplishments) {
                    prompt += `Accomplishments/Highlights: ${accomplishments}\n`;
                }
                if (managerObservations) {
                    prompt += `Manager Observations/Feedback: ${managerObservations}\n`;
                }
                if (nextStepsCheckIn) {
                    prompt += `Next Steps: ${nextStepsCheckIn}\n`;
                }
                prompt += `The feedback should be constructive and concise.`;

                let generatedFeedback;
                try {
                    generatedFeedback = await callGeminiApi(prompt);
                } catch (error) {
                    console.error("Error during API call for Regular Check-in:", error);
                    displayMessage(`${translations[currentLanguage].failedToGenerate} ${error.message}`, 'error', moduleSection);
                    generateButton.disabled = false;
                    generateButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateCheckInFeedback">${translations[currentLanguage].generateCheckInFeedback}</span>`;
                    return;
                }

                generateButton.disabled = false;
                generateButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M14 2v6h6"></path><path d="M12 18V12"></path><path d="M9 15h6"></path></svg><span data-i18n="generateCheckInFeedback">${translations[currentLanguage].generateCheckInFeedback}</span>`;


                if (generatedFeedback) {
                    checkInOutput.innerHTML = `<h3 class="mb-4" data-i18n="generatedCheckInFeedback">Generated Periodic Feedback:</h3>`;
                    const feedbackItem = document.createElement('div');
                    feedbackItem.className = 'output-item';
                    feedbackItem.innerHTML = `
                        <p>${generatedFeedback}</p>
                        <button class="copy-button">${copyIcon} <span data-i18n="copyToClipboard">${translations[currentLanguage].copyToClipboard}</span></button>
                    `;
                    feedbackItem.querySelector('.copy-button').onclick = (e) => {
                        e.preventDefault();
                        copyTextToClipboard(generatedFeedback, e.currentTarget);
                    };
                    checkInOutput.appendChild(feedbackItem);
                    checkInOutput.classList.remove('hidden');
                    applyTranslations();
                } else {
                    displayMessage(translations[currentLanguage].failedToGenerate + ' periodic feedback.', 'error', moduleSection);
                }
            };
        }


        /**
         * Renders the References module (now Learn & Grow with subcategories).
         */
        function renderReferences() {
            const appContent = document.getElementById('app-content');
            appContent.innerHTML = `
                <section class="module-section">
                    <h3 class="text-2xl font-bold mb-6 text-center text-linkedin-blue-dark" data-i18n="learnGrowBtn">Learn & Grow</h3>
                    <p class="mb-4 text-linkedin-text-dark" data-i18n="learnGrowIntroContent"></p>

                    <div class="subcategory-section mb-8">
                        <button class="flex items-center justify-between w-full text-left py-2 px-4 rounded-full bg-linkedin-blue-light hover:bg-linkedin-blue-primary hover:text-white transition-colors duration-200 group nav-button" id="toggleSmartGoalsCategory">
                            <h4 class="text-xl font-semibold text-linkedin-blue-dark group-hover:text-white m-0 p-0" data-i18n="smartGoalsCategory"></h4>
                            <svg id="arrowIconSmart" class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="smartGoalsCategoryContentArea" class="mt-4">
                            <p class="mb-4 text-linkedin-text-medium" data-i18n="smartGoalsCategoryContentIntro"></p>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="whatAreSmartGoals"></h4>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="smartSpecific"></span></strong> <span data-i18n="smartSpecificContent"></span><br>
                                    <em><span data-i18n="smartSpecificNotExample"></span></em><br>
                                    <em><span data-i18n="smartSpecificExample"></span></em>
                                </li>
                                <li><strong><span data-i18n="smartMeasurable"></span></strong> <span data-i18n="smartMeasurableContent"></span><br>
                                    <em><span data-i18n="smartMeasurableNotExample"></span></em><br>
                                    <em><span data-i18n="smartMeasurableExample"></span></em>
                                </li>
                                <li><strong><span data-i18n="smartAchievable"></span></strong> <span data-i18n="smartAchievableContent"></span><br>
                                    <em><span data-i18n="smartAchievableNotExample"></span></em><br>
                                    <em><span data-i18n="smartAchievableExample"></span></em>
                                </li>
                                <li><strong><span data-i18n="smartRelevant"></span></strong> <span data-i18n="smartRelevantContent"></span><br>
                                    <em><span data-i18n="smartRelevantNotExample"></span></em><br>
                                    <em><span data-i18n="smartRelevantExample"></span></em>
                                </li>
                                <li><strong><span data-i18n="smartTimeBound"></span></strong> <span data-i18n="smartTimeBoundContent"></span><br>
                                    <em><span data-i18n="smartTimeBoundNotExample"></span></em><br>
                                    <em><span data-i18n="smartTimeBoundExample"></span></em>
                                </li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="whyUseSmartGoals"></h4>
                            <p class="mb-2 text-linkedin-text-medium" data-i18n="whyUseSmartGoalsContentIntro"></p>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="enhancedClarityFocus"></span></strong> <span data-i18n="enhancedClarityFocusContent"></span></li>
                                <li><strong><span data-i18n="improvedMotivationCommitment"></span></strong> <span data-i18n="improvedMotivationCommitmentContent"></span></li>
                                <li><strong><span data-i18n="betterResourceAllocation"></span></strong> <span data-i18n="betterResourceAllocationContent"></span></li>
                                <li><strong><span data-i18n="objectiveEvaluation"></span></strong> <span data-i18n="objectiveEvaluationContent"></span></li>
                                <li><strong><span data-i18n="increasedAccountability"></span></strong> <span data-i18n="increasedAccountabilityContent"></span></li>
                                <li><strong><span data-i18n="higherSuccessRates"></span></strong> <span data-i18n="higherSuccessRatesContent"></span></li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="puttingSmartGoalsIntoPractice"></h4>
                            <p class="mb-2 text-linkedin-text-medium" data-i18n="puttingSmartGoalsIntoPracticeContentIntro"></p>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="defineTheObjective"></span></strong> <span data-i18n="defineTheObjectiveContent"></span></li>
                                <li><strong><span data-i18n="applyTheSmartFilter"></span></strong> <span data-i18n="applyTheSmartFilterContent"></span></li>
                                <li><strong><span data-i18n="documentCommunicate"></span></strong> <span data-i18n="documentCommunicateContent"></span></li>
                                <li><strong><span data-i18n="createActionSteps"></span></strong> <span data-i18n="createActionStepsContent"></span></li>
                                <li><strong><span data-i18n="trackProgress"></span></strong> <span data-i18n="trackProgressContent"></span></li>
                                <li><strong><span data-i18n="reviewReflect"></span></strong> <span data-i18n="reviewReflectContent"></span></li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="conclusion"></h4>
                            <p class="mb-4 text-linkedin-text-medium" data-i18n="conclusionContent"></p>
                        </div>
                    </div>

                    <div class="subcategory-section mb-8">
                        <button class="flex items-center justify-between w-full text-left py-2 px-4 rounded-full bg-linkedin-blue-light hover:bg-linkedin-blue-primary hover:text-white transition-colors duration-200 group nav-button" id="toggleEpjCategory">
                            <h4 class="text-xl font-semibold text-linkedin-blue-dark group-hover:text-white m-0 p-0" data-i18n="epjTitle"></h4>
                            <svg id="arrowIconEpj" class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="epjCategoryContentArea" class="mt-4">
                            <p class="mb-4 text-linkedin-text-medium" data-i18n="epjIntro"></p>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="epjPurpose"></h4>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="epjPurposeTransparency"></span></strong> <span data-i18n="epjPurposeTransparencyContent"></span></li>
                                <li><strong><span data-i18n="epjPurposeEvidence"></span></strong> <span data-i18n="epjPurposeEvidenceContent"></span></li>
                                <li><strong><span data-i18n="epjPurposeConsistency"></span></strong> <span data-i18n="epjPurposeConsistencyContent"></span></li>
                                <li><strong><span data-i18n="epjPurposeLegal"></span></strong> <span data-i18n="epjPurposeLegalContent"></span></li>
                                <li><strong><span data-i18n="epjPurposeDevelopment"></span></strong> <span data-i18n="epjPurposeDevelopmentContent"></span></li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="epjComponents"></h4>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="epjOverallRating"></span></strong> <span data-i18n="epjOverallRatingContent"></span></li>
                                <li><strong><span data-i18n="epjKeyContributions"></span></strong>
                                    <ul class="list-circle pl-5 mt-1">
                                        <li><strong><span data-i18n="epjKeyContributionsLink"></span></strong> <span data-i18n="epjKeyContributionsLinkContent"></span></li>
                                        <li><strong><span data-i18n="epjKeyContributionsQuantifiable"></span></strong> <span data-i18n="epjKeyContributionsQuantifiableContent"></span></li>
                                        <li><strong><span data-i18n="epjKeyContributionsQualitative"></span></strong> <span data-i18n="epjKeyContributionsQualitativeContent"></span></li>
                                        <li><strong><span data-i18n="epjKeyContributionsScope"></span></strong> <span data-i18n="epjKeyContributionsScopeContent"></span></li>
                                    </ul>
                                </li>
                                <li><strong><span data-i18n="epjAssessmentCompetencies"></span></strong> <span data-i18n="epjAssessmentCompetenciesContent"></span></li>
                                <li><strong><span data-i18n="epjBehavioralExamples"></span></strong> <span data-i18n="epjBehavioralExamplesContent"></span></li>
                                <li><strong><span data-i18n="epjStrengths"></span></strong> <span data-i18n="epjStrengthsContent"></span></li>
                                <li><strong><span data-i18n="epjDevelopmentAreas"></span></strong> <span data-i18n="epjDevelopmentAreasContent"></span></li>
                                <li><strong><span data-i18n="epjRationale"></span></strong> <span data-i18n="epjRationaleContent"></span>
                                    <ul class="list-circle pl-5 mt-1">
                                        <li><strong><span data-i18n="epjRationaleSynthesize"></span></strong> <span data-i18n="epjRationaleSynthesizeContent"></span></li>
                                        <li><strong><span data-i18n="epjRationaleScale"></span></strong> <span data-i18n="epjRationaleScaleContent"></span></li>
                                        <li><strong><span data-i18n="epjRationaleContext"></span></strong> <span data-i18n="epjRationaleContextContent"></span></li>
                                    </ul>
                                </li>
                                <li><strong><span data-i18n="epjRecommendations"></span></strong> <span data-i18n="epjRecommendationsContent"></span>
                                    <ul class="list-circle pl-5 mt-1">
                                        <li><strong><span data-i18n="epjRecommendationsCompensation"></span></strong> <span data-i18n="epjRecommendationsCompensationContent"></span></li>
                                        <li><strong><span data-i18n="epjRecommendationsDevelopment"></span></strong> <span data-i18n="epjRecommendationsDevelopmentContent"></span></li>
                                        <li><strong><span data-i18n="epjRecommendationsPIP"></span></strong> <span data-i18n="epjRecommendationsPIPContent"></span></li>
                                    </ul>
                                </li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="epjBestPractices"></h4>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="epjBestPracticesSpecific"></span></strong> <span data-i18n="epjBestPracticesSpecificContent"></span></li>
                                <li><strong><span data-i18n="epjBestPracticesObjective"></span></strong> <span data-i18n="epjBestPracticesObjectiveContent"></span></li>
                                <li><strong><span data-i18n="epjBestPracticesTimely"></span></strong> <span data-i18n="epjBestPracticesTimelyContent"></span></li>
                                <li><strong><span data-i18n="epjBestPracticesBalanced"></span></strong> <span data-i18n="epjBestPracticesBalancedContent"></span></li>
                                <li><strong><span data-i18n="epjBestPracticesConstructive"></span></strong> <span data-i18n="epjBestPracticesConstructiveContent"></span></li>
                                <li><strong><span data-i18n="epjBestPracticesAligned"></span></strong> <span data-i18n="epjBestPracticesAlignedContent"></span></li>
                                <li><strong><span data-i18n="epjBestPracticesConcise"></span></strong> <span data-i18n="epjBestPracticesConciseContent"></span></li>
                                <li><strong><span data-i18n="epjBestPracticesReference"></span></strong> <span data-i18n="epjBestPracticesReferenceContent"></span></li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="epjCommitteePerspective"></h4>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="epjCommitteePerspectiveClear"></span></strong> <span data-i18n="epjCommitteePerspectiveClearContent"></span></li>
                                <li><strong><span data-i18n="epjCommitteePerspectiveConsistent"></span></strong> <span data-i18n="epjCommitteePerspectiveConsistentContent"></span></li>
                                <li><strong><span data-i18n="epjCommitteePerspectiveGrounded"></span></strong> <span data-i18n="epjCommitteePerspectiveGroundedContent"></span></li>
                                <li><strong><span data-i18n="epjCommitteePerspectiveDataDriven"></span></strong> <span data-i18n="epjCommitteePerspectiveDataDrivenContent"></span></li>
                                <li><strong><span data-i18n="epjCommitteePerspectiveJobRequirements"></span></strong> <span data-i18n="epjCommitteePerspectiveJobRequirementsContent"></span></li>
                                <li><strong><span data-i18n="epjCommitteePerspectiveForwardLooking"></span></strong> <span data-i18n="epjCommitteePerspectiveForwardLookingContent"></span></li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="epjKeyTakeaways"></h4>
                            <ul class="list-disc pl-5 mb-4 text-linkedin-text-dark">
                                <li><strong><span data-i18n="epjKeyTakeawaysEPJ"></span></strong> <span data-i18n="epjKeyTakeawaysEPJContent"></span></li>
                                <li><strong><span data-i18n="epjKeyTakeawaysSpecificity"></span></strong> <span data-i18n="epjKeyTakeawaysSpecificityContent"></span></li>
                                <li><strong><span data-i18n="epjKeyTakeawaysAnchor"></span></strong> <span data-i18n="epjKeyTakeawaysAnchorContent"></span></li>
                                <li><strong><span data-i18n="epjKeyTakeawaysBalance"></span></strong> <span data-i18n="epjKeyTakeawaysBalanceContent"></span></li>
                                <li><strong><span data-i18n="epjKeyTakeawaysDocument"></span></strong> <span data-i18n="epjKeyTakeawaysDocumentContent"></span></li>
                            </ul>

                            <h4 class="text-lg font-semibold mb-2 text-linkedin-blue-dark" data-i18n="conclusion"></h4>
                            <p class="mb-4 text-linkedin-text-medium" data-i18n="epjConclusionContent"></p>
                        </div>
                    </div>
                </section>
            `;
            applyTranslations(); // Apply translations to newly rendered elements

            const toggleSmartGoalsButton = document.getElementById('toggleSmartGoalsCategory');
            const smartGoalsContentArea = document.getElementById('smartGoalsCategoryContentArea');
            const arrowIconSmart = document.getElementById('arrowIconSmart');

            const toggleEpjButton = document.getElementById('toggleEpjCategory');
            const epjContentArea = document.getElementById('epjCategoryContentArea');
            const arrowIconEpj = document.getElementById('arrowIconEpj');

            // Initial state: collapsed by default for both
            smartGoalsContentArea.classList.add('hidden');
            arrowIconSmart.classList.remove('rotate-180');
            epjContentArea.classList.add('hidden');
            arrowIconEpj.classList.remove('rotate-180');

            toggleSmartGoalsButton.onclick = () => {
                smartGoalsContentArea.classList.toggle('hidden');
                arrowIconSmart.classList.toggle('rotate-180');
            };

            toggleEpjButton.onclick = () => {
                epjContentArea.classList.toggle('hidden');
                arrowIconEpj.classList.toggle('rotate-180');
            };
        }

        /**
         * Attaches event listeners for navigation buttons.
         */
        function attachNavListeners() {
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                button.addEventListener('click', (event) => {
                    // Remove active class from all buttons
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to the clicked button
                    event.currentTarget.classList.add('active');

                    // Determine which module to render
                    switch (event.currentTarget.id) {
                        case 'nav-smartGoal':
                            activeModuleRenderer = renderSmartGoalDrafting;
                            break;
                        case 'nav-performanceAppraisal':
                            activeModuleRenderer = renderPerformanceAppraisal;
                            break;
                        case 'nav-performanceNote':
                            activeModuleRenderer = renderPerformanceNote;
                            break;
                        case 'nav-idp':
                            activeModuleRenderer = renderIdp;
                            break;
                        case 'nav-regularCheckIn':
                            activeModuleRenderer = renderRegularCheckIn;
                            break;
                        case 'nav-references': // This ID remains the same
                            activeModuleRenderer = renderReferences;
                            break;
                        default:
                            activeModuleRenderer = renderSmartGoalDrafting; // Default to SMART Goals
                    }
                    activeModuleRenderer(); // Render the module
                });
            });
        }

        /**
         * Attaches event listeners for language switcher buttons.
         */
        function attachLangListeners() {
            document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
            document.getElementById('lang-ar').addEventListener('click', () => setLanguage('ar'));
        }

        // Initial setup on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            setLanguage(currentLanguage); // Apply initial language
            attachNavListeners();
            attachLangListeners();

            // Set initial active nav button and render default module
            const defaultNavButton = document.getElementById('nav-smartGoal');
            if (defaultNavButton) {
                defaultNavButton.classList.add('active');
                renderSmartGoalDrafting(); // Render the default module
            }

            // Removed logo update logic as the logo is removed
        });

    </script>
</body>
</html>
